var Wt;const lt=globalThis.trustedTypes,qe=lt?lt.createPolicy("lit-html",{createHTML:s=>s}):void 0,Q=`lit$${(Math.random()+"").slice(9)}$`,hs="?"+Q,Ms=`<${hs}>`,ut=document,gt=(s="")=>ut.createComment(s),yt=s=>s===null||typeof s!="object"&&typeof s!="function",ls=Array.isArray,qs=s=>{var t;return ls(s)||typeof((t=s)===null||t===void 0?void 0:t[Symbol.iterator])=="function"},vt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Re=/-->/g,Ue=/>/g,X=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Ve=/'/g,He=/"/g,us=/^(?:script|style|textarea|title)$/i,Rs=s=>(t,...e)=>({Vt:s,strings:t,values:e}),L=Rs(1),Z=Symbol.for("lit-noChange"),g=Symbol.for("lit-nothing"),Ie=new WeakMap,Us=(s,t,e)=>{var i,r;const n=(i=e?.renderBefore)!==null&&i!==void 0?i:t;let o=n.Xs;if(o===void 0){const d=(r=e?.renderBefore)!==null&&r!==void 0?r:null;n.Xs=o=new wt(t.insertBefore(gt(),d),d,void 0,e??{})}return o._(s),o},ht=ut.createTreeWalker(ut,129,null,!1),Vs=(s,t)=>{const e=s.length-1,i=[];let r,n=t===2?"<svg>":"",o=vt;for(let l=0;l<e;l++){const u=s[l];let v,p,m=-1,w=0;for(;w<u.length&&(o.lastIndex=w,p=o.exec(u),p!==null);)w=o.lastIndex,o===vt?p[1]==="!--"?o=Re:p[1]!==void 0?o=Ue:p[2]!==void 0?(us.test(p[2])&&(r=RegExp("</"+p[2],"g")),o=X):p[3]!==void 0&&(o=X):o===X?p[0]===">"?(o=r??vt,m=-1):p[1]===void 0?m=-2:(m=o.lastIndex-p[2].length,v=p[1],o=p[3]===void 0?X:p[3]==='"'?He:Ve):o===He||o===Ve?o=X:o===Re||o===Ue?o=vt:(o=X,r=void 0);const R=o===X&&s[l+1].startsWith("/>")?" ":"";n+=o===vt?u+Ms:m>=0?(i.push(v),u.slice(0,m)+"$lit$"+u.slice(m)+Q+R):u+Q+(m===-2?(i.push(void 0),l):R)}const d=n+(s[e]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(s)||!s.hasOwnProperty("raw"))throw Error("invalid template strings array");return[qe!==void 0?qe.createHTML(d):d,i]};class bt{constructor({strings:t,Vt:e},i){let r;this.parts=[];let n=0,o=0;const d=t.length-1,l=this.parts,[u,v]=Vs(t,e);if(this.el=bt.createElement(u,i),ht.currentNode=this.el.content,e===2){const p=this.el.content,m=p.firstChild;m.remove(),p.append(...m.childNodes)}for(;(r=ht.nextNode())!==null&&l.length<d;){if(r.nodeType===1){if(r.hasAttributes()){const p=[];for(const m of r.getAttributeNames())if(m.endsWith("$lit$")||m.startsWith(Q)){const w=v[o++];if(p.push(m),w!==void 0){const R=r.getAttribute(w.toLowerCase()+"$lit$").split(Q),rt=/([.?@])?(.*)/.exec(w);l.push({type:1,index:n,name:rt[2],strings:R,ctor:rt[1]==="."?Is:rt[1]==="?"?Bs:rt[1]==="@"?zs:Ft})}else l.push({type:6,index:n})}for(const m of p)r.removeAttribute(m)}if(us.test(r.tagName)){const p=r.textContent.split(Q),m=p.length-1;if(m>0){r.textContent=lt?lt.emptyScript:"";for(let w=0;w<m;w++)r.append(p[w],gt()),ht.nextNode(),l.push({type:2,index:++n});r.append(p[m],gt())}}}else if(r.nodeType===8)if(r.data===hs)l.push({type:2,index:n});else{let p=-1;for(;(p=r.data.indexOf(Q,p+1))!==-1;)l.push({type:7,index:n}),p+=Q.length-1}n++}}static createElement(t,e){const i=ut.createElement("template");return i.innerHTML=t,i}}function dt(s,t,e=s,i){var r,n,o,d;if(t===Z)return t;let l=i!==void 0?(r=e.Ve)===null||r===void 0?void 0:r[i]:e.Gs;const u=yt(t)?void 0:t.Js;return l?.constructor!==u&&((n=l?.He)===null||n===void 0||n.call(l,!1),u===void 0?l=void 0:(l=new u(s),l.Ht(s,e,i)),i!==void 0?((o=(d=e).Ve)!==null&&o!==void 0?o:d.Ve=[])[i]=l:e.Gs=l),l!==void 0&&(t=dt(s,l.Ys(s,t.values),l,i)),t}class Hs{constructor(t,e){this.v=[],this.y=void 0,this.Ie=t,this.u=e}get parentNode(){return this.u.parentNode}get b(){return this.u.b}p(t){var e;const{el:{content:i},parts:r}=this.Ie,n=((e=t?.creationScope)!==null&&e!==void 0?e:ut).importNode(i,!0);ht.currentNode=n;let o=ht.nextNode(),d=0,l=0,u=r[0];for(;u!==void 0;){if(d===u.index){let v;u.type===2?v=new wt(o,o.nextSibling,this,t):u.type===1?v=new u.ctor(o,u.name,u.strings,this,t):u.type===6&&(v=new Qs(o,this,t)),this.v.push(v),u=r[++l]}d!==u?.index&&(o=ht.nextNode(),d++)}return n}m(t){let e=0;for(const i of this.v)i!==void 0&&(i.strings!==void 0?(i._(t,i,e),e+=i.strings.length-2):i._(t[e])),e++}}class wt{constructor(t,e,i,r){var n;this.type=2,this.i=g,this.y=void 0,this.X=t,this.dt=e,this.u=i,this.options=r,this.je=(n=r?.isConnected)===null||n===void 0||n}get b(){var t,e;return(e=(t=this.u)===null||t===void 0?void 0:t.b)!==null&&e!==void 0?e:this.je}get parentNode(){let t=this.X.parentNode;const e=this.u;return e!==void 0&&t.nodeType===11&&(t=e.parentNode),t}get startNode(){return this.X}get endNode(){return this.dt}_(t,e=this){t=dt(this,t,e),yt(t)?t===g||t==null||t===""?(this.i!==g&&this.pt(),this.i=g):t!==this.i&&t!==Z&&this.$(t):t.Vt!==void 0?this.T(t):t.nodeType!==void 0?this.k(t):qs(t)?this.S(t):this.$(t)}A(t,e=this.dt){return this.X.parentNode.insertBefore(t,e)}k(t){this.i!==t&&(this.pt(),this.i=this.A(t))}$(t){this.i!==g&&yt(this.i)?this.X.nextSibling.data=t:this.k(ut.createTextNode(t)),this.i=t}T(t){var e;const{values:i,Vt:r}=t,n=typeof r=="number"?this.Zs(t):(r.el===void 0&&(r.el=bt.createElement(r.h,this.options)),r);if(((e=this.i)===null||e===void 0?void 0:e.Ie)===n)this.i.m(i);else{const o=new Hs(n,this),d=o.p(this.options);o.m(i),this.k(d),this.i=o}}Zs(t){let e=Ie.get(t.strings);return e===void 0&&Ie.set(t.strings,e=new bt(t)),e}S(t){ls(this.i)||(this.i=[],this.pt());const e=this.i;let i,r=0;for(const n of t)r===e.length?e.push(i=new wt(this.A(gt()),this.A(gt()),this,this.options)):i=e[r],i._(n),r++;r<e.length&&(this.pt(i&&i.dt.nextSibling,r),e.length=r)}pt(t=this.X.nextSibling,e){var i;for((i=this.It)===null||i===void 0||i.call(this,!1,!0,e);t&&t!==this.dt;){const r=t.nextSibling;t.remove(),t=r}}setConnected(t){var e;this.u===void 0&&(this.je=t,(e=this.It)===null||e===void 0||e.call(this,t))}}class Ft{constructor(t,e,i,r,n){this.type=1,this.i=g,this.y=void 0,this.element=t,this.name=e,this.u=r,this.options=n,i.length>2||i[0]!==""||i[1]!==""?(this.i=Array(i.length-1).fill(new String),this.strings=i):this.i=g}get tagName(){return this.element.tagName}get b(){return this.u.b}_(t,e=this,i,r){const n=this.strings;let o=!1;if(n===void 0)t=dt(this,t,e,0),o=!yt(t)||t!==this.i&&t!==Z,o&&(this.i=t);else{const d=t;let l,u;for(t=n[0],l=0;l<n.length-1;l++)u=dt(this,d[i+l],e,l),u===Z&&(u=this.i[l]),o||(o=!yt(u)||u!==this.i[l]),u===g?t=g:t!==g&&(t+=(u??"")+n[l+1]),this.i[l]=u}o&&!r&&this.C(t)}C(t){t===g?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class Is extends Ft{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===g?void 0:t}}const js=lt?lt.emptyScript:"";class Bs extends Ft{constructor(){super(...arguments),this.type=4}C(t){t&&t!==g?this.element.setAttribute(this.name,js):this.element.removeAttribute(this.name)}}class zs extends Ft{constructor(t,e,i,r,n){super(t,e,i,r,n),this.type=5}_(t,e=this){var i;if((t=(i=dt(this,t,e,0))!==null&&i!==void 0?i:g)===Z)return;const r=this.i,n=t===g&&r!==g||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,o=t!==g&&(r===g||n);n&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,t),this.i=t}handleEvent(t){var e,i;typeof this.i=="function"?this.i.call((i=(e=this.options)===null||e===void 0?void 0:e.host)!==null&&i!==void 0?i:this.element,t):this.i.handleEvent(t)}}class Qs{constructor(t,e,i){this.element=t,this.type=6,this.y=void 0,this.u=e,this.options=i}get b(){return this.u.b}_(t){dt(this,t)}}const je=window.litHtmlPolyfillSupport;je?.(bt,wt),((Wt=globalThis.litHtmlVersions)!==null&&Wt!==void 0?Wt:globalThis.litHtmlVersions=[]).push("2.2.1");const ae=s=>s??g;function C(s,t,e,i){return s.addEventListener(t,e,i),()=>{s.removeEventListener(t,e,i)}}function ye(s,t){return t.some(e=>s?.type.includes(e)??!1)}function Ws(s){return ye(s,["pointer"])}function Be(s){return ye(s,["touch"])}function Ks(s){return ye(s,["click","mouse"])}class y{constructor(){this.r=this.r??[]}add(...t){t&&t.forEach(e=>{this.r.push(e)})}empty(){this.r.forEach(t=>t()),this.r=[]}}function c(s,t,e,i){let r;function n(){r||(r=C(i?.target??s,t,e,i))}n(),s.addController({hostConnected(){n()},hostDisconnected(){r?.(),r=void 0}})}class be extends CustomEvent{get originEvent(){return Ot(this)??this}get isOriginTrusted(){return this.originEvent?.isTrusted??!1}constructor(t,e={}){super(t,e);this.triggerEvent=e.triggerEvent,this.hasOwnProperty("originEvent")||Object.defineProperties(this,{originEvent:{get(){return Ot(this)??this}},isOriginTrusted:{get(){return Ot(this)?.isTrusted??!1}}})}}function a(s,t={}){return new be(s,t)}function Ot(s){let t=s.triggerEvent;for(;t&&t.triggerEvent;)t=t.triggerEvent;return t}function E(s,t){(Ot(s)??s).triggerEvent=t}function he(s,t){if(t.bubbles&&t.composed)return;const e=new be(t.type,{triggerEvent:t.triggerEvent??t,detail:t.detail,bubbles:t.bubbles,cancelable:t.cancelable,composed:t.composed});s.dispatchEvent(e)}const $t=new Map;class Xs{constructor(t,e,i){this.e=t,this.initialValue=e,this.jt=i,this.Bt=[],t.addController({hostConnected:()=>{this.ti()},hostDisconnected:()=>{delete this.e[this.id]}})}get id(){return this.jt.id}get value(){return this.e[this.id]??this.initialValue}get registered(){return this.id in this.e}ti(){if(this.id in this.e)return;const t=e=>{this.e[this.id]=e,this.Bt?.forEach(i=>i(e)),this.Bt=void 0};if(this.e.dispatchEvent(a("vds-context-consumer-connect",{bubbles:!0,composed:!0,detail:{id:this.id,setValue:t}})),!this.registered){const e=$t.get(this.id)??[];e.push({host:this.e,setValue:t}),$t.set(this.id,e)}}whenRegistered(t){if(this.registered){t(this.value);return}this.Bt?.push(t)}}function Gs(s,t){const e=$t.get(s)??[],i=e.filter(({host:r})=>t.contains(r));return $t.set(s,e.filter(({host:r})=>!t.contains(r))),i}class Js{constructor(t,e,i){this.e=t,this.tn=e,this.jt=i,this.Be=new y,this.zt=e(),t.addController({hostConnected:this.start.bind(this),hostDisconnected:this.stop.bind(this)})}get id(){return this.jt.id}get value(){return this.zt}start(){const t=C(this.e,"vds-context-consumer-connect",this.ei.bind(this));for(const e of Gs(this.id,this.e))e.setValue(this.zt);this.Be.add(t)}stop(){this.Be.empty()}ei(t){const e=t.detail;e.id===this.id&&(t.stopImmediatePropagation(),e.setValue(this.zt))}}function we(s){const t=Symbol("@vidstack/context");return{id:t,consume(e){return new Xs(e,s(),{id:t})},provide(e){return new Js(e,s,{id:t})}}}function le(s){return typeof s?.id=="symbol"&&s.id.description==="@vidstack/context"}function Ys(s){return ae(s===""||s==="undefined"?void 0:s)}function A(...s){}function Zs(s,t){return s!=s?t==t:s!==t||s&&typeof s=="object"||typeof s=="function"}function Ee(s){return s===null}function f(s){return typeof s>"u"}function F(s){return Ee(s)||f(s)}function Mt(s){return typeof s=="number"&&!Number.isNaN(s)}function tt(s){return typeof s=="string"}function I(s){return typeof s=="function"}function ti(s){return Array.isArray(s)}const Tt=new Map,xt=new Map;function ei(s,t,e){for(const{host:i,callback:r}of Array.from(Tt.get(t)??[]))i!==s&&i.contains(s)&&r(s,e)}function si(s,t){return Array.from(xt.get(t)??[]).filter(({element:e})=>s!==e&&s.contains(e))}function Ce(s,t,e){const i={host:s,callback:e};s.addController({hostConnected:()=>{for(const{element:r,onDisconnect:n}of si(s,t))e(r,n);Tt.set(t,(Tt.get(t)??new Set).add(i))},hostDisconnected:()=>{Tt.get(t)?.delete(i)}})}function ds(s,t,e={}){const i=e.register,r=new y,n=d=>{r.add(d)},o={element:s,onDisconnect:n};s.addController({hostConnected(){const d=a(t,{bubbles:!0,composed:!0,detail:o});s.dispatchEvent(d),i&&(xt.set(i,(xt.get(i)??new Set).add(o)),ei(s,i,n))},hostDisconnected(){r.empty(),i&&xt.get(i)?.delete(o)}})}const j=typeof window<"u",qt=j?window.navigator?.userAgent.toLowerCase():"",cs=/iphone|ipad|ipod|ios|CriOS|FxiOS/.test(qt);/android/.test(qt);j&&/(iPhone|iPod)/gi.test(window.navigator?.platform);/firefox/.test(qt);const ii=j&&!!window.chrome;j&&!ii&&(window.safari||cs||/(apple|safari)/.test(qt));function ri(){return j&&!f(screen.orientation)&&I(screen.orientation.lock)&&I(screen.orientation.unlock)}function ni(){return window?.MediaSource??window?.WebKitMediaSource}function oi(){return window?.SourceBuffer??window?.WebKitSourceBuffer}function ze(){const s=ni();if(f(s))return!1;const t=s&&I(s.isTypeSupported)&&s.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),e=oi(),i=f(e)||!f(e.prototype)&&I(e.prototype.appendBuffer)&&I(e.prototype.remove);return!!t&&!!i}var T={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},Qe=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],We=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],Ke=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],_=typeof window<"u"&&typeof window.document<"u"?window.document:{},k="fullscreenEnabled"in _&&Object.keys(T)||Qe[0]in _&&Qe||We[0]in _&&We||Ke[0]in _&&Ke||[],ai={requestFullscreen:function(s){return s[k[T.requestFullscreen]]()},requestFullscreenFunction:function(s){return s[k[T.requestFullscreen]]},get exitFullscreen(){return _[k[T.exitFullscreen]].bind(_)},get fullscreenPseudoClass(){return":"+k[T.fullscreen]},addEventListener:function(s,t,e){return _.addEventListener(k[T[s]],t,e)},removeEventListener:function(s,t,e){return _.removeEventListener(k[T[s]],t,e)},get fullscreenEnabled(){return Boolean(_[k[T.fullscreenEnabled]])},set fullscreenEnabled(s){},get fullscreenElement(){return _[k[T.fullscreenElement]]},set fullscreenElement(s){},get onfullscreenchange(){return _[("on"+k[T.fullscreenchange]).toLowerCase()]},set onfullscreenchange(s){return _[("on"+k[T.fullscreenchange]).toLowerCase()]=s},get onfullscreenerror(){return _[("on"+k[T.fullscreenerror]).toLowerCase()]},set onfullscreenerror(s){return _[("on"+k[T.fullscreenerror]).toLowerCase()]=s}},G=ai;const hi="@vidstack/log-colors";li();function li(){if(j&&!f(window.localStorage)){let s={};try{s=JSON.parse(localStorage.getItem(hi)??"")}catch{}return new Map(Object.entries(s))}return new Map}Object.freeze({silent:0,error:1,warn:2,info:3,debug:4});Object.freeze({silent:"white",error:"hsl(6, 58%, 50%)",warn:"hsl(51, 58%, 50%)",info:"hsl(219, 58%, 50%)",debug:"hsl(280, 58%, 50%)"});function kt(s,t=2){return Number(s.toFixed(t))}function ue(s,t,e){return Math.max(s,Math.min(e,t))}function de(s){return String(s).split(".")[1]?.length??0}class Se{constructor(t,e){this.e=t,this.Qt=e,this.P=void 0,this.w=new y,t.addController({hostDisconnected:this.G.bind(this)})}async G(){this.isFullscreen&&await this.exitFullscreen(),this.w.empty()}get isSupported(){return this.isSupportedNatively}get isSupportedNatively(){return G.fullscreenEnabled}get isFullscreen(){return this.isNativeFullscreen}get isNativeFullscreen(){if(G.fullscreenElement===this.e)return!0;try{return this.e.matches(G.fullscreenPseudoClass)}catch{return!1}}Wt(t){if(!this.isSupported)return A;const e=C(G,"fullscreenchange",t);return()=>{e()}}Kt(t){if(!this.isSupported)return A;const e=C(G,"fullscreenerror",t);return()=>{e()}}async enterFullscreen(){if(this.isFullscreen)return;this.ze(),this.w.add(this.Wt(this.Xt.bind(this))),this.w.add(this.Kt(this.Qe.bind(this)));const t=await this.Gt();return await this.si(),t}async Gt(){return G.requestFullscreen(this.e)}Xt(t){this.isFullscreen||this.w.empty(),this.e.dispatchEvent(a("vds-fullscreen-change",{bubbles:!0,composed:!0,detail:this.isFullscreen,triggerEvent:t}))}Qe(t){this.e.dispatchEvent(a("vds-fullscreen-error",{bubbles:!0,composed:!0,triggerEvent:t}))}async exitFullscreen(){if(!this.isFullscreen)return;this.ze();const t=await this.Jt();return await this.ii(),t}async Jt(){return G.exitFullscreen()}We(){return this.Qt.canOrient&&!f(this.screenOrientationLock)}async si(){f(this.screenOrientationLock)||!this.We()||await this.Qt.lock(this.screenOrientationLock)}async ii(){!this.We()||await this.Qt.unlock()}ze(){if(!this.isSupported)throw Error("Fullscreen API is not enabled or supported in this environment.")}}class ui{constructor(t){this.e=t;const e=new y;let i=!1;e.add(C(document,"pointerdown",()=>{i=!1})),c(t,"keydown",r=>{r.metaKey||r.altKey||r.ctrlKey||(i=!0)}),c(t,"focus",r=>{i&&t.classList.add("focus-visible")}),c(t,"blur",r=>{t.classList.remove("focus-visible")}),t.addController({hostDisconnected:()=>{e.empty()}})}}function ps(s){return new ui(s)}class fs{constructor(t,e={},i=()=>!0,r=void 0){this.e=t,this.Yt=i,this.P=r,this.Zt=!1,this.te=!1;const{target:n,skipInitial:o,...d}=e;this.Ke=n??void 0,this.Zt=o??this.Zt,window.IntersectionObserver&&(this.J=new IntersectionObserver(l=>{const u=this.te;this.te=!1,!(this.Zt&&u)&&(this.handleChanges(l),this.e.requestUpdate())},d),t.addController(this))}handleChanges(t){this.value=this.Yt(t,this.J)}hostConnected(){this.Ke&&this.observe(this.Ke)}hostDisconnected(){this.ri()}async hostUpdated(){const t=this.J.takeRecords();t.length&&this.handleChanges(t)}observe(t){return this.J.observe(t),this.te=!0,()=>{this.J.unobserve(t)}}ri(){this.J.disconnect()}}function di(...s){return new fs(...s)}const Xe=typeof window<"u"&&typeof window.safari=="object"&&window?.safari.pushNotification;class ci{constructor(t,e,i=void 0){this.e=t,this.Yt=e,this.P=i,this.O=this.ee(),this.Y=document.visibilityState,this.r=new y,t.addController(this)}get state(){return this.O}get visibility(){return this.Y}hostConnected(){const t=["focus","blur","visibilitychange","pageshow","pagehide"];this.O=this.ee(),this.Y=document.visibilityState,t.forEach(e=>{const i=C(window,e,this.ni.bind(this));this.r.add(i)}),Xe&&this.r.add(C(window,"beforeunload",e=>{this.oi=setTimeout(()=>{e.defaultPrevented||e.returnValue.length>0||(this.O="hidden",this.Y="hidden",this.Xe())},0)}))}hostDisconnected(){this.r.empty()}ni(t){Xe&&window.clearTimeout(this.oi);const e=this.O,i=this.Y;(t.type!=="blur"||this.state==="active")&&(this.O=this.ee(t),this.Y=document.visibilityState=="hidden"?"hidden":"visible"),(this.state!==e||this.visibility!==i)&&this.Xe()}Xe(){this.Yt({state:this.state,visibility:this.visibility})}ee(t){return t?.type==="blur"||document.visibilityState==="hidden"?"hidden":document.hasFocus()?"active":"passive"}}function At(){let s=A,t=A;return{promise:new Promise((i,r)=>{s=i,t=r}),resolve:s,reject:t}}class Lt{constructor(){this.V=new Map,this.ft=[],this.se=At(),this.Z=!1}get isServing(){return this.Z}get size(){return this.V.size}async waitForFlush(){this.Z||await this.se.promise}queue(t,e){if(this.Z){e();return}this.ft=[...this.ft.filter(i=>i!==t),t],this.V.set(t,e)}serve(t){this.V.get(t)?.(),this.V.delete(t)}start(){this.Ge(),this.Z=!0,this.V.size>0&&this.Ge()}Ge(){for(const t of this.ft)this.serve(t);this.ft=[],this.Je()}ai(){this.V.clear()}Je(){this.se.resolve(),this.se=At()}stop(){this.Z=!1}destroy(){this.stop(),this.ai(),this.Je()}}function vs(s){const t=new Lt;return s.addController({hostConnected:t.start.bind(t),hostDisconnected:t.destroy.bind(t)}),t}class ms{constructor(t){this.e=t,this.vt=!1,this.P=void 0,this.Ye(),this.w=new y,t.addController({hostConnected:this.hi.bind(this),hostDisconnected:this.G.bind(this)})}async hi(){this.Ye(),this.li()}async G(){this.canOrient&&this.vt&&await this.unlock(),this.w.empty()}get currentOrientation(){return this.ie}get canOrient(){return ri()}get isLocked(){return this.vt}async lock(t){this.Ze(),await screen.orientation.lock(t),this.vt=!0,this.e.dispatchEvent(a("vds-screen-orientation-lock-change",{bubbles:!0,composed:!0,detail:t}))}async unlock(){this.Ze(),await screen.orientation.unlock(),this.vt=!1,this.e.dispatchEvent(a("vds-screen-orientation-lock-change",{bubbles:!0,composed:!0,detail:screen.orientation.type}))}li(){!this.canOrient||this.w.add(this.ui())}ui(){return C(screen.orientation,"change",this.di.bind(this))}di(t){this.ie=window.screen.orientation.type,this.e.dispatchEvent(a("vds-screen-orientation-change",{bubbles:!0,composed:!0,detail:this.ie,triggerEvent:t}))}Ye(){this.ie=j?window.screen?.orientation?.type:void 0}Ze(){if(!this.canOrient)throw Error("Screen orientation API is not available.")}}function et(s){return Object.keys(s)}const nt=[];function pi(s,t){return{initialValue:s,subscribe:H(s,t).subscribe}}function H(s,t=A){let e;const i=new Set;function r(d){if(Zs(s,d)&&(s=d,e)){const l=!nt.length;for(const u of i)u[1](),nt.push(u,s);if(l){for(let u=0;u<nt.length;u+=2)nt[u][0](nt[u+1]);nt.length=0}}}function n(d){r(d(s))}function o(d,l=A){const u=[d,l];return i.add(u),i.size===1&&(e=t(r)||A),d(s),()=>{i.delete(u),i.size===0&&(e?.(),e=null)}}return{initialValue:s,set:r,update:n,subscribe:o}}function _e(s,t,e){const i=!Array.isArray(s),r=i?[s]:s,n=t.length<2;return pi(e,o=>{let d=!1;const l=[];let u=0,v=A;const p=()=>{if(u)return;v();const w=t(i?l[0]:l,o);n?o(w):v=I(w)?w:A},m=r.map((w,R)=>w.subscribe(rt=>{l[R]=rt,u&=~(1<<R),d&&p()},()=>{u|=1<<R}));return d=!0,p(),function(){m.forEach(R=>R()),v()}})}function J(s){let t;return s.subscribe(e=>t=e)(),t}function gs(s,t,e){let i,r;const n=()=>{r=(i?.value??t).subscribe(e)};le(t)&&(i=t.consume(s)),s.addController({hostConnected(){le(t)?i.whenRegistered(n):n()},hostDisconnected(){r?.()}})}function ys(s,t,e,i){if(le(t)){const r=t.consume(s);let n;const o=()=>{n=r.value[e].subscribe(i)};s.addController({hostConnected:()=>{r.whenRegistered(o)},hostDisconnected:()=>{n?.()}})}else return gs(s,t[e],i)}function fi(s,t){for(const e of et(s)){const i=s[e],r=t[e];if(!i||!r)continue;const n=J(i),o=J(r);n!==o&&r.set(n)}}function ce(s){return new Proxy(s,{get(t,e){return J(t[e])},has(t,e){return Reflect.has(t,e)},ownKeys(t){return Reflect.ownKeys(t)},getOwnPropertyDescriptor(t,e){return Reflect.getOwnPropertyDescriptor(t,e)}})}function b(s,t,e=j){const i=e&&!f(window.customElements.get(s));!e||i||window.customElements.define(s,t)}function D(s,t,e){if(F(e)||e===!1)s.removeAttribute(t);else{const i=tt(e)?e:"";s.setAttribute(t,i)}}function M(s,t,e){s.hasAttribute(t)||s.setAttribute(t,e)}function ot(s,t,e,i="vds"){s.style.setProperty(`--${i}-${t}`,e||null)}function vi(s,t){const e=t?`slot[name="${t}"]`:"slot:not([name])",r=s.shadowRoot?.querySelector(e)?.assignedNodes({flatten:!0})??[];return Array.prototype.filter.call(r,n=>n.nodeType==Node.ELEMENT_NODE)}function Pe(s){return s?.type.startsWith("key")??!1}function mi(s){return Pe(s)&&(s.key==="Enter"||s.key===" ")}async function gi(s){const t=document.querySelector(`script[src="${s}"]`);if(!Ee(t))return;const e=document.createElement("script"),i=At();e.src=s,e.onload=i.resolve,e.onerror=i.reject;const r=document.getElementsByTagName("script")[0];return F(r.parentNode)||r.parentNode.insertBefore(e,r),i.promise}function bs(s,t="preconnect",e=j){if(!e)return!1;const i=document.querySelector(`link[href="${s}"]`);if(!Ee(i))return!0;const r=document.createElement("link");return r.rel=t,r.href=s,r.crossOrigin="true",document.head.append(r),!0}class ws{static async load(t){return new Promise((e,i)=>{if(this.pendingRequests[t]){this.pendingRequests[t].push({resolve:e,reject:i});return}this.pendingRequests[t]=[{resolve:e,reject:i}],gi(t).then(()=>{this.pendingRequests[t].forEach(r=>r.resolve()),delete this.pendingRequests[t]}).catch(r=>{this.pendingRequests[t].forEach(n=>n.reject(r)),delete this.pendingRequests[t]})})}}ws.pendingRequests={};function yi(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function bi(s){return s.replace(/-./g,t=>t[1].toUpperCase())}function Kt(s,t){const e=String(s),i=e.length;if(i<t){const n=t-i;return`${"0".repeat(n)}${s}`}return e}function Es(s){const t=Math.trunc(s/3600),e=Math.trunc(s%3600/60),i=Math.trunc(s%60),r=Number((s-Math.trunc(s)).toPrecision(3));return{hours:t,minutes:e,seconds:i,fraction:r}}function Cs(s,t=!1,e=!1){const{hours:i,minutes:r,seconds:n}=Es(s),o=t?Kt(i,2):i,d=Kt(r,2),l=Kt(n,2);return i>0||e?`${o}:${d}:${l}`:`${r}:${l}`}function Ge(s){const t=[],{hours:e,minutes:i,seconds:r}=Es(s),n=(o,d)=>o===1?d:`${d}s`;return e>0&&t.push(`${e} ${n(e,"hour")}`),i>0&&t.push(`${i} ${n(i,"minute")}`),(r>0||t.length===0)&&t.push(`${r} ${n(r,"second")}`),t.join(", ")}var Oe=wi;function wi(s,t,e){var i=null,r=null,n=function(){i&&(clearTimeout(i),r=null,i=null)},o=function(){var l=r;n(),l&&l()},d=function(){if(!t)return s.apply(this,arguments);var l=this,u=arguments,v=e&&!i;if(n(),r=function(){s.apply(l,u)},i=setTimeout(function(){if(i=null,!v){var p=r;return r=null,p()}},t),v)return r()};return d.cancel=n,d.flush=o,d}var Ss=Ei;function Ei(s,t,e){var i=null,r=null,n=e&&e.leading,o=e&&e.trailing;n==null&&(n=!0),o==null&&(o=!n),n==!0&&(o=!1);var d=function(){i&&(clearTimeout(i),i=null)},l=function(){var v=r;d(),v&&v()},u=function(){var v=n&&!i,p=this,m=arguments;if(r=function(){return s.apply(p,m)},i||(i=setTimeout(function(){if(i=null,o)return r()},t)),v)return v=!1,r()};return u.cancel=d,u.flush=l,u}function Xt(s){let t;const e=()=>!f(t),i=()=>{f(t)||(window.cancelAnimationFrame(t),t=void 0)};function r(...n){e()||(t=window.requestAnimationFrame(()=>{s.apply(this,n),t=void 0}))}return r.cancel=i,r.pending=e,r}const Te=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,xe=Symbol(),Je=new Map;class _s{constructor(t,e){if(this.ci=!0,e!==xe)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){let t=Je.get(this.cssText);return Te&&t===void 0&&(Je.set(this.cssText,t=new CSSStyleSheet),t.replaceSync(this.cssText)),t}toString(){return this.cssText}}const Ci=s=>new _s(typeof s=="string"?s:s+"",xe),P=(s,...t)=>{const e=s.length===1?s[0]:t.reduce((i,r,n)=>i+(o=>{if(o.ci===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+s[n+1],s[0]);return new _s(e,xe)},Si=(s,t)=>{Te?s.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):t.forEach(e=>{const i=document.createElement("style"),r=window.litNonce;r!==void 0&&i.setAttribute("nonce",r),i.textContent=e.cssText,s.appendChild(i)})},Ye=Te?s=>s:s=>s instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return Ci(e)})(s):s;var Gt;const Ze=window.trustedTypes,_i=Ze?Ze.emptyScript:"",ts=window.reactiveElementPolyfillSupport,pe={toAttribute(s,t){switch(t){case Boolean:s=s?_i:null;break;case Object:case Array:s=s==null?s:JSON.stringify(s)}return s},fromAttribute(s,t){let e=s;switch(t){case Boolean:e=s!==null;break;case Number:e=s===null?null:Number(s);break;case Object:case Array:try{e=JSON.parse(s)}catch{e=null}}return e}},Ps=(s,t)=>t!==s&&(t==t||s==s),Jt={attribute:!0,type:String,converter:pe,reflect:!1,hasChanged:Ps};class at extends HTMLElement{constructor(){super(),this.mt=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this.H=null,this.o()}static addInitializer(t){var e;(e=this.l)!==null&&e!==void 0||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach((e,i)=>{const r=this.ts(i,e);r!==void 0&&(this.es.set(r,i),t.push(r))}),t}static createProperty(t,e=Jt){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const i=typeof t=="symbol"?Symbol():"__"+t,r=this.getPropertyDescriptor(t,i,e);r!==void 0&&Object.defineProperty(this.prototype,t,r)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(r){const n=this[t];this[e]=r,this.requestUpdate(t,n,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||Jt}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this.es=new Map,this.hasOwnProperty("properties")){const e=this.properties,i=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const r of i)this.createProperty(r,e[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const r of i)e.unshift(Ye(r))}else t!==void 0&&e.push(Ye(t));return e}static ts(t,e){const i=e.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}o(){var t;this.re=new Promise(e=>this.enableUpdating=e),this.gt=new Map,this.pi(),this.requestUpdate(),(t=this.constructor.l)===null||t===void 0||t.forEach(e=>e(this))}addController(t){var e,i;((e=this.M)!==null&&e!==void 0?e:this.M=[]).push(t),this.renderRoot!==void 0&&this.isConnected&&((i=t.hostConnected)===null||i===void 0||i.call(t))}removeController(t){var e;(e=this.M)===null||e===void 0||e.splice(this.M.indexOf(t)>>>0,1)}pi(){this.constructor.elementProperties.forEach((t,e)=>{this.hasOwnProperty(e)&&(this.mt.set(e,this[e]),delete this[e])})}createRenderRoot(){var t;const e=(t=this.shadowRoot)!==null&&t!==void 0?t:this.attachShadow(this.constructor.shadowRootOptions);return Si(e,this.constructor.elementStyles),e}connectedCallback(){var t;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this.M)===null||t===void 0||t.forEach(e=>{var i;return(i=e.hostConnected)===null||i===void 0?void 0:i.call(e)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this.M)===null||t===void 0||t.forEach(e=>{var i;return(i=e.hostDisconnected)===null||i===void 0?void 0:i.call(e)})}attributeChangedCallback(t,e,i){this.fi(t,i)}vi(t,e,i=Jt){var r,n;const o=this.constructor.ts(t,i);if(o!==void 0&&i.reflect===!0){const d=((n=(r=i.converter)===null||r===void 0?void 0:r.toAttribute)!==null&&n!==void 0?n:pe.toAttribute)(e,i.type);this.H=t,d==null?this.removeAttribute(o):this.setAttribute(o,d),this.H=null}}fi(t,e){var i,r,n;const o=this.constructor,d=o.es.get(t);if(d!==void 0&&this.H!==d){const l=o.getPropertyOptions(d),u=l.converter,v=(n=(r=(i=u)===null||i===void 0?void 0:i.fromAttribute)!==null&&r!==void 0?r:typeof u=="function"?u:null)!==null&&n!==void 0?n:pe.fromAttribute;this.H=d,this[d]=v(e,l.type),this.H=null}}requestUpdate(t,e,i){let r=!0;t!==void 0&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||Ps)(this[t],e)?(this.gt.has(t)||this.gt.set(t,e),i.reflect===!0&&this.H!==t&&(this.tt===void 0&&(this.tt=new Map),this.tt.set(t,i))):r=!1),!this.isUpdatePending&&r&&(this.re=this.mi())}async mi(){this.isUpdatePending=!0;try{await this.re}catch(e){Promise.reject(e)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this.mt&&(this.mt.forEach((r,n)=>this[n]=r),this.mt=void 0);let e=!1;const i=this.gt;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),(t=this.M)===null||t===void 0||t.forEach(r=>{var n;return(n=r.hostUpdate)===null||n===void 0?void 0:n.call(r)}),this.update(i)):this.ne()}catch(r){throw e=!1,this.ne(),r}e&&this.gi(i)}willUpdate(t){}gi(t){var e;(e=this.M)===null||e===void 0||e.forEach(i=>{var r;return(r=i.hostUpdated)===null||r===void 0?void 0:r.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}ne(){this.gt=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this.re}shouldUpdate(t){return!0}update(t){this.tt!==void 0&&(this.tt.forEach((e,i)=>this.vi(i,this[i],e)),this.tt=void 0),this.ne()}updated(t){}firstUpdated(t){}}at.finalized=!0,at.elementProperties=new Map,at.elementStyles=[],at.shadowRootOptions={mode:"open"},ts?.({ReactiveElement:at}),((Gt=globalThis.reactiveElementVersions)!==null&&Gt!==void 0?Gt:globalThis.reactiveElementVersions=[]).push("1.3.1");var Yt,Zt;class S extends at{constructor(){super(...arguments),this.renderOptions={host:this},this.oe=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return(t=(e=this.renderOptions).renderBefore)!==null&&t!==void 0||(e.renderBefore=i.firstChild),i}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this.oe=Us(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this.oe)===null||t===void 0||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this.oe)===null||t===void 0||t.setConnected(!1)}render(){return Z}}S.finalized=!0,S.en=!0,(Yt=globalThis.litElementHydrateSupport)===null||Yt===void 0||Yt.call(globalThis,{LitElement:S});const es=globalThis.litElementPolyfillSupport;es?.({LitElement:S});((Zt=globalThis.litElementVersions)!==null&&Zt!==void 0?Zt:globalThis.litElementVersions=[]).push("3.2.0");const Pi=(s,t)=>t.kind==="method"&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(e){e.createProperty(t.key,s)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){typeof t.initializer=="function"&&(this[t.key]=t.initializer.call(this))},finisher(e){e.createProperty(t.key,s)}};function h(s){return(t,e)=>e!==void 0?((i,r,n)=>{r.constructor.createProperty(n,i)})(s,t,e):Pi(s,t)}function N(s){return h({...s,state:!0})}var te;((te=window.HTMLSlotElement)===null||te===void 0?void 0:te.prototype.assignedElements)!=null;const Os=we(()=>H(void 0));var U=(s=>(s.Unknown="unknown",s.Audio="audio",s.Video="video",s.LiveVideo="live-video",s))(U||{});function Oi(s,t,e){if(!Mt(t)||t<0||t>e)throw new Error(`Failed to execute '${s}' on 'TimeRanges': The index provided (${t}) is non-numeric or out of bounds (0-${e}).`)}function ss(s,t,e,i){return Oi(s,i,e.length-1),e[i][t]}function ee(s){if(f(s)||s.length===0){const t=()=>{throw new Error("This TimeRanges object is empty")};return{length:0,start:t,end:t}}return{length:s.length,start:ss.bind(null,"start",0,s),end:ss.bind(null,"end",1,s)}}function se(s,t){return ti(s)?ee(s):f(s)||f(t)?ee():ee([[s,t]])}var st=(s=>(s.Unknown="unknown",s.Audio="audio",s.Video="video",s))(st||{});const Dt={autoplay:!1,autoplayError:void 0,buffered:se(),duration:0,bufferedAmount:0,canLoad:!1,canPlay:!1,canFullscreen:!1,controls:!1,poster:"",currentSrc:"",currentTime:0,ended:!1,error:void 0,fullscreen:!1,userIdle:!1,loop:!1,mediaType:U.Unknown,muted:!1,paused:!0,played:se(),playing:!1,playsinline:!1,seekable:se(),seekableAmount:0,seeking:!1,src:[],started:!1,viewType:st.Unknown,volume:1,waiting:!1};function fe(){const s={};for(const t of et(Dt))s[t]=H(Dt[t]);return s}const Ti=new Set(["autoplay","canFullscreen","canLoad","controls","currentSrc","loop","muted","playsinline","poster","src","viewType","volume"]);function xi(s){et(s).forEach(t=>{Ti.has(t)||s[t].set(s[t].initialValue)})}function $i(s){for(const t of et(Dt))s[t].set(Dt[t])}const Rt=we(fe);function x(s,t,e){return ys(s,Rt,t,e)}var ki=Object.defineProperty,Ai=Object.getOwnPropertyDescriptor,$=(s,t,e,i)=>{for(var r=i>1?void 0:i?Ai(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&ki(t,e,r),r};const Ut=Symbol("@vidstack/media-provider-discovery");class O extends S{constructor(){super();this.D=new y,this.P=void 0,this.loading="lazy",this.yt=!1,this.controllerQueue=new Lt,this.t=fe(),this.O=ce(this.t),this.connectedQueue=vs(this),this.mediaQueue=new Lt,this.screenOrientationController=new ms(this),this.fullscreenController=new Se(this,this.screenOrientationController),ds(this,"vds-media-provider-connect",{register:Ut});const t=di(this,{target:this,threshold:0},e=>{if(this.loading!=="lazy"){t.hostDisconnected();return}e[0]?.isIntersecting&&(this.startLoadingMedia(),t.hostDisconnected())})}connectedCallback(){super.connectedCallback(),this.yi(),D(this,"paused",this.paused),D(this,"muted",this.muted),window.requestAnimationFrame(()=>{f(this.canLoadPoster)&&(this.canLoadPoster=!0)})}firstUpdated(t){super.firstUpdated(t),this.dispatchEvent(a("vds-fullscreen-support-change",{detail:this.canFullscreen})),this.loading==="eager"&&this.startLoadingMedia()}render(){return L`<slot @slotchange="${this.handleDefaultSlotChange}"></slot>`}disconnectedCallback(){super.disconnectedCallback(),this.mediaQueue.destroy(),this.D.empty()}yi(){}get volume(){return this.bi()}set volume(t){this.mediaQueue.queue("volume",()=>{const e=this.volume,i=ue(0,t,1);e!==i&&(this.wi(i),this.requestUpdate("volume",e))})}get paused(){return this.Ei()}set paused(t){this.mediaQueue.queue("paused",()=>{if(this.paused!==t)try{t?this.pause():this.play(),this.requestUpdate("paused",!t)}catch(e){this.P?.error("paused-change-fail",e)}})}get currentTime(){return this.Ci()}set currentTime(t){this.mediaQueue.queue("current-time",()=>{const e=this.currentTime;e!==t&&(this.ss(t),this.requestUpdate("currentTime",e))})}get muted(){return this.Si()}set muted(t){this.mediaQueue.queue("muted",()=>{const e=this.muted;e!==t&&(this._i(t),this.requestUpdate("muted",e))})}get poster(){return this.state.poster}set poster(t){const e=this.poster;e!==t&&(this.dispatchEvent(a("vds-poster-change",{detail:t})),this.requestUpdate("poster",e))}get loop(){return this.state.loop}set loop(t){const e=this.loop;e!==t&&(this.dispatchEvent(a("vds-loop-change",{detail:t})),this.requestUpdate("loop",e))}get controls(){return this.state.controls}set controls(t){const e=this.controls;e!==t&&(this.dispatchEvent(a("vds-controls-change",{detail:t})),this.requestUpdate("controls",e))}get canLoad(){return this.state.canLoad}startLoadingMedia(){this.controllerQueue,this.dispatchEvent(a("vds-can-load"))}is(){if(!this.state.canPlay)throw Error("Media is not ready - wait for `vds-can-play` event.")}async Pi(){if(!(!this.state.ended||this.state.currentTime===0))return this.ss(0)}sn(){if(this.state.viewType!==st.Video)throw Error("Player is currently not in a video view.")}async rs({event:t,duration:e}){this.state.canPlay||(this.dispatchEvent(a("vds-can-play",{triggerEvent:t,detail:{duration:e}})),this.mediaQueue.start(),await this.ns())}bt(t,e){this.state.currentSrc!==t&&(this.mediaQueue.stop(),this.dispatchEvent(a("vds-current-src-change",{detail:t,triggerEvent:e})))}get autoplay(){return this.state.autoplay}set autoplay(t){this.autoplay!==t&&(this.dispatchEvent(a("vds-autoplay-change",{detail:t})),this.requestUpdate("autoplay",!t)),this.ns()}get Oi(){return this.state.canPlay&&this.state.autoplay&&!this.state.started}async ns(){if(!!this.Oi){this.yt=!0;try{await this.play(),this.dispatchEvent(a("vds-autoplay",{detail:{muted:this.muted}}))}catch(t){this.dispatchEvent(a("vds-autoplay-fail",{detail:{muted:this.muted,error:t}})),this.requestUpdate()}this.yt=!1}}get controller(){return this.I}get logLevel(){return this.I?.logLevel??"silent"}set logLevel(t){}get idleDelay(){return this.I?.idleDelay??0}set idleDelay(t){this.controllerQueue.queue("idle-delay",()=>{this.I.idleDelay=t})}attachMediaController(t,e){this.I=t,this.t=t.t,this.O=t.state,this.controllerQueue.start(),e(()=>{this.controllerQueue.destroy(),this.I=void 0,this.t=fe(),this.O=ce(this.t)})}dispatchEvent(t){return!this.I&&t.type.startsWith("vds-")?(this.controllerQueue.queue(t.type,()=>{super.dispatchEvent(t)}),!1):super.dispatchEvent(t)}store(){return this.t}get state(){return this.O}get canFullscreen(){return this.fullscreenController.isSupported}get fullscreen(){return this.fullscreenController.isFullscreen}get fullscreenOrientation(){return this.fullscreenController.screenOrientationLock}set fullscreenOrientation(t){const e=this.fullscreenController.screenOrientationLock;e!==t&&(this.fullscreenController.screenOrientationLock=t,this.requestUpdate("fullscreen-orientation",e))}enterFullscreen(){return this.fullscreenController.enterFullscreen()}exitFullscreen(){return this.fullscreenController.exitFullscreen()}}$([h({type:Number,reflect:!0})],O.prototype,"volume",1);$([h({type:Boolean,reflect:!0})],O.prototype,"paused",1);$([h({type:Number})],O.prototype,"currentTime",1);$([h({type:Boolean,reflect:!0})],O.prototype,"muted",1);$([h({reflect:!0})],O.prototype,"poster",1);$([h({type:Boolean,reflect:!0})],O.prototype,"loop",1);$([h({type:Boolean,reflect:!0})],O.prototype,"controls",1);$([N()],O.prototype,"canLoadPoster",2);$([h({attribute:"loading"})],O.prototype,"loading",2);$([h({type:Boolean,reflect:!0})],O.prototype,"autoplay",1);$([h({attribute:"log-level"})],O.prototype,"logLevel",1);$([h({attribute:"idle-delay",type:Number})],O.prototype,"idleDelay",1);$([h({attribute:"fullscreen-orientation"})],O.prototype,"fullscreenOrientation",1);class Li{constructor(t,e){this.e=t,this.E=e,this.os=!1,this.as=!1,this.hs=!1,this.r=new y,this.delay=2e3,t.addController(this)}get paused(){return this.hs||this.as}set paused(t){this.hs=t,this.wt()}hostConnected(){this.r.add(this.E.paused.subscribe(e=>{this.as=e,this.wt()})),["pointerdown","pointermove","focus","keydown"].forEach(e=>{const i=C(this.e,e,Oe(this.wt.bind(this),250,!0));this.r.add(i)})}hostDisconnected(){this.r.empty(),this.ae()}wt(){this.paused?this.ae():this.Ti()}Ti(){this.ae(),this.ls=window.setTimeout(()=>{this.us(!this.paused)},this.delay)}ae(){window.clearTimeout(this.ls),this.ls=void 0,this.us(!1)}us(t){this.os!==t&&(this.e.dispatchEvent(a("vds-user-idle-change",{detail:t})),this.os=t)}}class Di{constructor(t){this.e=t,this.D=new y,this.providerQueue=new Lt,this.providerDisposal=new y,this.xi=void 0,this.P=void 0,this.ds=Os.provide(this.e),this.cs=Rt.provide(this.e),this.state=ce(this.t),this.Et=new Li(this.e,this.t),this.wt=c(this.e,"vds-user-idle-change",e=>{this.t.userIdle.set(e.detail),this.x("userIdle",e)}),this.d={play:[],pause:[],volume:[],fullscreen:[],seeked:[],seeking:[],userIdle:[]},this.rn=c(this.e,"vds-mute-request",this.g("muted",e=>{this.state.muted||(this.d.volume.push(e),this.provider.muted=!0)})),this.nn=c(this.e,"vds-unmute-request",this.g("muted",e=>{!this.state.muted||(this.d.volume.push(e),this.provider.muted=!1)})),this.an=c(this.e,"vds-play-request",this.g("paused",e=>{!this.state.paused||(this.d.play.push(e),this.provider.paused=!1)})),this.hn=c(this.e,"vds-pause-request",this.g("paused",e=>{this.state.paused||(this.d.pause.push(e),this.provider.paused=!0)})),this.he=!1,this.ln=c(this.e,"vds-seeking-request",this.g("seeking",e=>{this.j(),this.d.seeking.push(e),this.he=!0,this.t.seeking.set(!0)})),this.un=c(this.e,"vds-seek-request",this.g("seeking",e=>{this.store.ended&&(this.B=!0),this.d.seeked.push(e),this.he=!1;let i=e.detail;this.state.duration-e.detail<.25&&(i=this.state.duration),this.provider.currentTime=i})),this.dn=c(this.e,"vds-volume-change-request",this.g("volume",e=>{this.state.volume!==e.detail&&(this.d.volume.push(e),this.provider.volume=e.detail)})),this.cn=c(this.e,"vds-enter-fullscreen-request",this.g("fullscreen",async e=>{if(this.state.fullscreen)return;(e.detail??"media")==="media"&&this.e.canFullscreen?(this.d.fullscreen.push(e),await this.e.enterFullscreen?.()):this.provider&&(this.d.fullscreen.push(e),await this.provider.enterFullscreen())})),this.pn=c(this.e,"vds-exit-fullscreen-request",this.g("fullscreen",async e=>{if(!this.state.fullscreen)return;(e.detail??"media")==="media"&&this.e.canFullscreen?(this.d.fullscreen.push(e),await this.e.exitFullscreen?.()):this.provider&&(this.d.fullscreen.push(e),await this.provider.exitFullscreen())})),this.fn=c(this.e,"vds-resume-user-idle-request",e=>{!this.le(e)||(this.d.userIdle.push(e),this.Et.paused=!1)}),this.vn=c(this.e,"vds-pause-user-idle-request",e=>{!this.le(e)||(this.d.userIdle.push(e),this.Et.paused=!0)}),this.mn=c(this.e,"vds-show-poster-request",this.g("poster",()=>{this.s.canLoadPoster=!0})),this.gn=c(this.e,"vds-hide-poster-request",this.g("poster",()=>{this.s.canLoadPoster=!1})),this.yn=c(this.e,"vds-loop-request",this.g("loop",()=>{window.requestAnimationFrame(async()=>{try{this.N=!0,this.B=!0,await this.s.play()}catch{this.B=!1,this.N=!1}})})),this.Xt=c(this.e,"vds-fullscreen-change",e=>{this.t.fullscreen.set(e.detail),this.x("fullscreen",e)}),this.Qe=c(this.e,"vds-fullscreen-error",e=>{this.x("fullscreen",e)}),this.B=!1,this.N=!1,this.Ct=!1,this.c=[],this.ue=Ss(e=>{this.c.push(e),this.t.seeking.set(!0),this.t.currentTime.set(e.detail),this.x("seeking",e)},150,{leading:!0}),this.ps=Oe(()=>{if(!this.St)return;this.Ct=!0;const e=a("vds-waiting",this.St);this.c.push(e),this.t.waiting.set(!0),this.t.playing.set(!1),this.s?.dispatchEvent(e),this.St=void 0,this.Ct=!1},300),this.de=!0,Ce(t,Ut,(e,i)=>{this.attachMediaProvider(e,i)}),t.addController({hostDisconnected:()=>{this.q(),this.$i(),this.providerQueue.destroy(),this.providerDisposal.empty(),this.de=!0,this.D.empty()}})}get logLevel(){return this.xi?.logLevel??"silent"}set logLevel(t){}get provider(){return this.s}attachMediaProvider(t,e){!F(this.provider)||this.provider===t||(this.fs(),this.s=t,this.ds.value.set(t),fi(this.s.t,this.t),this.ce(),t.attachMediaController(this,i=>this.D.add(i)),this.ki(),e(this.fs.bind(this)))}fs(){F(this.provider)||(this.providerQueue.destroy(),this.providerDisposal.empty(),this.s=void 0,this.ds.value.set(void 0),$i(this.t),this.t.viewType.set(st.Unknown))}ki(){this.providerQueue.start(),this.providerDisposal.add(()=>{this.providerQueue.stop()})}get store(){return this.cs.value}get t(){return this.cs.value}get idleDelay(){return this.Et.delay}set idleDelay(t){this.Et.delay=t}$i(){et(this.d).forEach(t=>{this.d[t]=[]})}x(t,e){const i=this.d[t].shift();i&&(e.requestEvent=i,E(e,i))}le(t){return t.stopPropagation(),!0}g(t,e){return i=>{if(!!this.le(i)){if(this.s){e(i);return}this.providerQueue.queue(t,()=>{e(i)})}}}ce(){if(!this.s)return;const t={"vds-can-load":this.Ai,"vds-load-start":this.pe,"vds-loaded-data":this.fe,"vds-loaded-metadata":this.et,"vds-can-play":this.st,"vds-can-play-through":this.ve,"vds-current-src-change":this.bt,"vds-autoplay":this.Li,"vds-autoplay-fail":this.Di,"vds-play":this.me,"vds-play-fail":this.Ni,"vds-playing":this.ge,"vds-pause":this.ye,"vds-time-update":this.Fi,"vds-volume-change":this.be,"vds-seeking":this.ue,"vds-seeked":this.we,"vds-waiting":this.Ee,"vds-ended":this.Ce,"vds-autoplay-change":this.Mi,"vds-error":this.it,"vds-fullscreen-support-change":this.qi,"vds-poster-change":this.Ri,"vds-loop-change":this.Ui,"vds-playsinline-change":this._t,"vds-controls-change":this.Vi,"vds-media-type-change":this.Hi,"vds-view-type-change":this.Ii,"vds-duration-change":this.Se,"vds-progress":this._e,"vds-src-change":this.z};for(const e of et(t)){const i=t[e].bind(this);this.providerDisposal.add(C(this.s,e,i))}}q(){this.B=!1,this.N=!1,this.Ct=!1,this.St=void 0,this.c=[]}n(t){return this.c[this.c.map(e=>e.type).lastIndexOf(t)]}Ai(){this.t.canLoad.set(!0)}vs(t){this.t.currentSrc.set(t.currentSrc),this.t.mediaType.set(t.mediaType),this.t.viewType.set(t.viewType)}pe(t){this.vs(t.detail),this.c.push(t),E(t,this.n("vds-src-change"))}fe(t){this.c.push(t),E(t,this.n("vds-load-start"))}et(t){this.vs(t.detail),this.c.push(t),E(t,this.n("vds-load-start"))}st(t){this.c.push(t),t.triggerEvent?.type!=="loadedmetadata"&&E(t,this.n("vds-loaded-metadata")),this.t.canPlay.set(!0),this.t.duration.set(t.detail.duration)}ve(t){this.t.canPlay.set(!0),this.t.duration.set(t.detail.duration),E(t,this.n("vds-can-play"))}Li(t){this.c.push(t),E(t,this.n("vds-play")),E(t,this.n("vds-can-play")),this.t.autoplayError.set(void 0)}Di(t){E(t,this.n("vds-play-fail")),E(t,this.n("vds-can-play")),this.t.autoplayError.set(t.detail),this.q()}me(t){if(this.N||!this.state.paused){t.stopImmediatePropagation();return}if(this.c.push(t),E(t,this.n("vds-waiting")),this.x("play",t),this.t.paused.set(!1),this.t.autoplayError.set(void 0),this.state.ended||this.B){this.B=!1,this.t.ended.set(!1);const e=a("vds-replay",{triggerEvent:t});this.s?.dispatchEvent(e)}}Ni(t){this.c.push(t),this.j(),E(t,this.n("vds-play")),this.t.paused.set(!0),this.t.playing.set(!1),this.x("play",t),this.q()}ge(t){this.c.push(t);const e=this.n("vds-play");if(e?(E(t,this.n("vds-waiting")),E(t,e)):E(t,this.n("vds-seeked")),this.j(),this.q(),this.t.paused.set(!1),this.t.playing.set(!0),this.t.seeking.set(!1),this.t.ended.set(!1),this.N){t.stopImmediatePropagation(),this.N=!1;return}this.state.started||(this.t.started.set(!0),this.s?.dispatchEvent(a("vds-started",{triggerEvent:t})))}ye(t){if(this.N){t.stopImmediatePropagation();return}E(t,this.n("vds-seeked")),this.x("pause",t),this.t.paused.set(!0),this.t.playing.set(!1),this.t.seeking.set(!1),this.j(),this.q()}Fi(t){const{currentTime:e,played:i}=t.detail;this.t.currentTime.set(e),this.t.played.set(i),this.t.waiting.set(!1)}be(t){this.t.volume.set(t.detail.volume),this.t.muted.set(t.detail.muted),this.x("volume",t)}we(t){this.he?(this.t.seeking.set(!0),t.stopImmediatePropagation()):this.state.seeking&&(this.c.push(t),E(t,this.n("vds-waiting")),E(t,this.n("vds-seeking")),this.state.paused&&this.j(),this.t.seeking.set(!1),t.detail!==this.state.duration&&this.t.ended.set(!1),this.t.currentTime.set(t.detail),this.x("seeked",t))}j(){this.ps.cancel(),this.t.waiting.set(!1)}Ee(t){this.Ct||(t.stopImmediatePropagation(),this.St=t,this.ps())}Ce(t){if(this.N){t.stopImmediatePropagation();return}this.j(),this.t.paused.set(!0),this.t.playing.set(!1),this.t.seeking.set(!1),this.t.ended.set(!0),this.q()}Mi(t){this.t.autoplay.set(t.detail)}bt(t){if(this.t.currentSrc.set(t.detail),this.de){this.de=!1;return}this.q(),xi(this.t)}it(t){this.t.error.set(t.detail)}qi(t){this.t.canFullscreen.set(t.detail)}Ri(t){this.t.poster.set(t.detail)}Ui(t){this.t.loop.set(t.detail)}_t(t){this.t.playsinline.set(t.detail)}Vi(t){this.t.controls.set(t.detail)}Hi(t){this.t.mediaType.set(t.detail)}Se(t){this.t.duration.set(t.detail)}_e(t){const{buffered:e,seekable:i}=t.detail,r=e.length===0?0:e.end(e.length-1),n=i.length===0?0:i.end(i.length-1);this.t.buffered.set(e),this.t.bufferedAmount.set(r),this.t.seekable.set(i),this.t.seekableAmount.set(n)}z(t){this.t.src.set(t.detail)}Ii(t){this.t.viewType.set(t.detail)}}class Ts{constructor(t,e,i){this.e=t,this.t=e,this.ms=i,this.r=new y,this.e.addController({hostConnected:this.ji.bind(this),hostDisconnected:this.Bi.bind(this)})}ji(){(window.requestIdleCallback??(e=>e()))(()=>{for(const e of this.ms){const i=this.t[e];if(i){const r=this.gs(e),n=i.subscribe(o=>{window.requestAnimationFrame(()=>{this.ys(e,r,o)})});this.r.add(n)}}})}Bi(){for(const t of this.ms)this.bs(t,this.gs(t));this.r.empty()}gs(t){return yi(t)}}class Ni extends Ts{ys(t,e,i){window.requestAnimationFrame(()=>{D(this.e,e,tt(i)||Mt(i)?String(i):!!i)})}bs(t,e){this.e.removeAttribute(e)}}function Fi(...s){return new Ni(...s)}class Mi extends Ts{ys(t,e,i){window.requestAnimationFrame(()=>{this.e.style.setProperty(this.ws(e),tt(i)||Mt(i)?String(i):null)})}ws(t){return`--vds-${t}`}bs(t,e){this.e.style.setProperty(this.ws(e),null)}}function qi(...s){return new Mi(...s)}var Ri=Object.defineProperty,Ui=Object.getOwnPropertyDescriptor,Vt=(s,t,e,i)=>{for(var r=i>1?void 0:i?Ui(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&Ri(t,e,r),r};const Vi=Symbol("@vidstack/media-discovery");class Et extends S{constructor(){super();this.controller=new Di(this),this.__mediaFullscreen=!1,this.__mediaIsVideoView=!1,this.__mediaPlaysinline=!1,this.screenOrientationController=new ms(this),this.fullscreenController=new Se(this,this.screenOrientationController),ds(this,"vds-media-connect",{register:Vi}),x(this,"fullscreen",t=>{this.__mediaFullscreen=t}),x(this,"viewType",t=>{this.__mediaIsVideoView=t===st.Video}),x(this,"playsinline",t=>{this.__mediaPlaysinline=t}),this.zi(),this.Qi()}static get styles(){return[P`:host{display:inline-block;position:relative;contain:content}:host([hidden]){display:none}`]}get provider(){return this.controller.provider}update(t){D(this,"hide-ui",this.Wi()),super.update(t)}render(){return L`<slot></slot>`}get canFullscreen(){return this.fullscreenController.isSupported}get fullscreen(){return this.fullscreenController.isFullscreen}get fullscreenOrientation(){return this.fullscreenController.screenOrientationLock}set fullscreenOrientation(t){const e=this.fullscreenController.screenOrientationLock;e!==t&&(this.fullscreenController.screenOrientationLock=t,this.requestUpdate("fullscreen-orientation",e))}enterFullscreen(){return this.fullscreenController.enterFullscreen()}exitFullscreen(){return this.fullscreenController.exitFullscreen()}zi(){Fi(this,this.controller.store,["autoplay","autoplayError","canLoad","canPlay","canFullscreen","ended","error","fullscreen","userIdle","loop","mediaType","muted","paused","playing","playsinline","seeking","started","viewType","waiting"])}Qi(){qi(this,this.controller.store,["bufferedAmount","currentTime","duration","seekableAmount"])}Wi(){return cs&&this.__mediaIsVideoView&&(!this.__mediaPlaysinline||this.__mediaFullscreen)}}Vt([N()],Et.prototype,"__mediaFullscreen",2);Vt([N()],Et.prototype,"__mediaIsVideoView",2);Vt([N()],Et.prototype,"__mediaPlaysinline",2);Vt([h({attribute:"fullscreen-orientation"})],Et.prototype,"fullscreenOrientation",1);b("vds-media",Et);var Hi=Object.defineProperty,Ii=Object.getOwnPropertyDescriptor,$e=(s,t,e,i)=>{for(var r=i>1?void 0:i?Ii(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&Hi(t,e,r),r};const Pt=new Set;let ie=!1,re=!1;class Ht extends S{constructor(){super();this.singlePlayback=!1,this.syncVolume=!1,this.F=new y,Ce(this,Ut,(t,e)=>{this.Pe(t,e)})}static get styles(){return P`:host{display:contents}`}disconnectedCallback(){super.disconnectedCallback(),this.F.empty()}render(){return L`<slot></slot>`}get provider(){return this.s}Pe(t,e){this.s=t,Pt.add(t);const i=this.Ki();if(i&&(this.s.volume=i.volume,this.s.muted=i.muted),this.singlePlayback){const r=C(t,"vds-play",this.Xi.bind(this));this.F.add(r)}if(this.syncVolume){const r=C(t,"vds-volume-change",Oe(this.Gi.bind(this),10,!0));this.F.add(r)}if(this.volumeStorageKey){const r=C(t,"vds-volume-change",this.Ji.bind(this));this.F.add(r)}e(()=>{Pt.delete(t),this.s=void 0,this.F.empty()})}Xi(){ie||(ie=!0,Pt.forEach(t=>{t!==this.s&&(t.paused=!0)}),ie=!1)}Gi(t){if(re)return;re=!0;const{volume:e,muted:i}=t.detail;Pt.forEach(r=>{r!==this.s&&(r.volume=e,r.muted=i)}),this.dispatchEvent(a("vds-media-volume-sync",{bubbles:!0,composed:!0,detail:t.detail})),re=!1}Ki(){if(!!this.volumeStorageKey)try{return JSON.parse(localStorage.getItem(this.volumeStorageKey))}catch{return}}Ji(t){!this.volumeStorageKey||localStorage.setItem(this.volumeStorageKey,JSON.stringify(t.detail))}}$e([h({type:Boolean,attribute:"single-playback"})],Ht.prototype,"singlePlayback",2);$e([h({type:Boolean,attribute:"sync-volume"})],Ht.prototype,"syncVolume",2);$e([h({attribute:"volume-storage-key"})],Ht.prototype,"volumeStorageKey",2);b("vds-media-sync",Ht);var ji=Object.defineProperty,Bi=Object.getOwnPropertyDescriptor,B=(s,t,e,i)=>{for(var r=i>1?void 0:i?Bi(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&ji(t,e,r),r};class V extends S{constructor(){super();this.viewportEnterDelay=0,this.pageChangeType="state",this.pageEnterDelay=0,this.intersectionThreshold=1,this.Oe=!1,this.F=new y,this.Te=!1,this.intersectionController=new fs(this,{root:this.intersectionRoot?document.querySelector(this.intersectionRoot):null,threshold:this.intersectionThreshold},t=>{window.clearTimeout(this.Es);const e=t[0];this.Oe=e.isIntersecting,this.Te&&(e.isIntersecting?this.Es=window.setTimeout(()=>{this.Cs(this.enterViewport),this.Es=void 0},this.viewportEnterDelay):this.exitViewport&&(this.Oe=!1,this.Ss(this.exitViewport))),this.Te=!0,this._s()}),this.pageController=new ci(this,({state:t,visibility:e})=>{if(window.clearTimeout(this.Ps),!this.isIntersecting)return;(this.pageChangeType==="state"?t:e)==="hidden"?this.Ss(this.exitPage):this.enterViewport&&(this.Ps=window.setTimeout(()=>{this.Cs(this.enterPage),this.Ps=void 0},this.pageEnterDelay)),this._s()}),Ce(this,Ut,(t,e)=>{this.Pe(t,e)})}static get styles(){return P`:host{display:contents}`}get isIntersecting(){return this.Oe}disconnectedCallback(){super.disconnectedCallback(),this.Te=!1,this.F.empty()}render(){return L`<slot></slot>`}get provider(){return this.s}Pe(t,e){this.s=t;const i=this.intersectionController.observe(t);e(()=>{i(),this.s=void 0,this.F.empty()})}Cs(t){!this.s||(t==="play"?this.s.paused=!1:t==="unmute"&&(this.s.muted=!1))}Ss(t){!this.s||(t==="pause"?this.s.paused=!0:t==="mute"&&(this.s.muted=!0))}_s(){!this.s||this.dispatchEvent(a("vds-media-visibility-change",{bubbles:!0,composed:!0,detail:{provider:this.s,viewport:{isIntersecting:this.isIntersecting},page:{state:this.pageController.state,visibility:this.pageController.visibility}}}))}}B([h({attribute:"enter-viewport"})],V.prototype,"enterViewport",2);B([h({attribute:"exit-viewport"})],V.prototype,"exitViewport",2);B([h({type:Number,attribute:"viewport-enter-delay"})],V.prototype,"viewportEnterDelay",2);B([h({attribute:"enter-page"})],V.prototype,"enterPage",2);B([h({attribute:"exit-page"})],V.prototype,"exitPage",2);B([h({attribute:"page-change-type"})],V.prototype,"pageChangeType",2);B([h({type:Number,attribute:"page-enter-delay"})],V.prototype,"pageEnterDelay",2);B([h({attribute:"intersection-root"})],V.prototype,"intersectionRoot",2);B([h({type:Number,attribute:"intersection-threshold"})],V.prototype,"intersectionThreshold",2);b("vds-media-visibility",V);class Ct{constructor(t){this.e=t,this.Yi=vs(this.e),this.P=void 0}play(t){this.f("vds-play-request",{triggerEvent:t})}pause(t){this.f("vds-pause-request",{triggerEvent:t})}mute(t){this.f("vds-mute-request",{triggerEvent:t})}unmute(t){this.f("vds-unmute-request",{triggerEvent:t})}enterFullscreen(t,e){this.f("vds-enter-fullscreen-request",{triggerEvent:e,detail:t})}exitFullscreen(t,e){this.f("vds-exit-fullscreen-request",{triggerEvent:e,detail:t})}seeking(t,e){this.f("vds-seeking-request",{detail:t,triggerEvent:e})}seek(t,e){this.f("vds-seek-request",{detail:t,triggerEvent:e})}changeVolume(t,e){this.f("vds-volume-change-request",{detail:t,triggerEvent:e})}resumeUserIdle(t){this.f("vds-resume-user-idle-request",{triggerEvent:t})}pauseUserIdle(t){this.f("vds-pause-user-idle-request",{triggerEvent:t})}showPoster(t){this.f("vds-show-poster-request",{triggerEvent:t})}hidePoster(t){this.f("vds-hide-poster-request",{triggerEvent:t})}f(t,e){this.Yi.queue(t,()=>{const i=a(t,{...e,bubbles:!0,composed:!0});this.e.dispatchEvent(i)})}}var ve=(s=>(s[s.Aborted=1]="Aborted",s[s.Network=2]="Network",s[s.Decode=3]="Decode",s[s.SrcNotSupported=4]="SrcNotSupported",s))(ve||{}),zi=Object.defineProperty,Qi=Object.getOwnPropertyDescriptor,Wi=(s,t,e,i)=>{for(var r=i>1?void 0:i?Qi(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&zi(t,e,r),r};const Ki=/\.(m4a|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,Xi=/\.(mp4|og[gv]|webm|mov|m4v|avi)($|\?)/i;function Gi(s){return Ki.test(s)?U.Audio:Xi.test(s)?U.Video:U.Unknown}class ke extends O{constructor(){super(...arguments);this.preload="metadata",this.Q=void 0,this.Pt=!1,this.Ot=new y,this.W=!1,this.xe=!1,this.$e=!1}get mediaElement(){return this.Os}disconnectedCallback(){this.W=!1,super.disconnectedCallback(),this.Tt()}Tt(){Mt(this.Q)&&window.cancelAnimationFrame(this.Q),this.Q=void 0}Zi(){!f(this.Q)||this.Ts()}Ts(){const t=this.mediaElement?.currentTime??0;this.state.currentTime!==t&&this.K(t),this.Q=window.requestAnimationFrame(()=>{f(this.Q)||this.Ts()})}K(t,e){this.dispatchEvent(a("vds-time-update",{detail:{currentTime:Math.min(t,this.mediaElement?.duration??0),played:this.mediaElement.played},triggerEvent:e}))}handleDefaultSlotChange(){window.requestAnimationFrame(()=>{const t=vi(this)[0],e=t?.tagName;e&&/^(audio|video)$/i.test(e),this.xs(),this.Os=t??void 0,this.$s()})}get tr(){return this.canLoad&&!F(this.mediaElement)&&!this.Pt}$s(){if(!this.tr)return;const t=this.mediaElement;t.hasAttribute("loop")&&(this.loop=!0),t.removeAttribute("loop"),t.removeAttribute("poster"),D(t,"controls",this.controls),this.ce(),this.er(),this.sr(),this.canLoadPoster&&this.poster.length>0&&t.setAttribute("poster",this.poster),this.ir(),this.Pt=!0,this.D.add(this.xs.bind(this))}xs(){this.Tt(),this.Ot.empty(),this.Os=void 0,this.Pt,this.Pt=!1}startLoadingMedia(){super.startLoadingMedia(),this.$s()}ir(){this.mediaElement.setAttribute("preload",this.preload);const t=this.mediaElement.networkState>=1;this.xe=t,this.$e=t,this.mediaElement.load(),setTimeout(()=>{this.xe=!1,this.$e=!1},0)}er(){const t=()=>this.mediaElement.hasAttribute("playsinline");this._t(t());const e=new MutationObserver(()=>this._t(t()));e.observe(this.mediaElement,{attributeFilter:["playsinline"]}),this.Ot.add(()=>e.disconnect())}_t(t){this.dispatchEvent(a("vds-playsinline-change",{detail:t}))}sr(){this.z(this.ks());const t=new MutationObserver(()=>this.z(this.ks()));t.observe(this.mediaElement,{attributeFilter:["src"],subtree:!0}),this.Ot.add(()=>t.disconnect())}z(t){this.dispatchEvent(a("vds-src-change",{detail:t}))}ks(){const t=[this.mediaElement?.src,...Array.from(this.mediaElement?.querySelectorAll("source")??[]).map(e=>e.src)].filter(Boolean);return Array.from(new Set(t))}As(){return{src:this.state.src,currentSrc:this.mediaElement.currentSrc,duration:this.mediaElement.duration||0,poster:this.mediaElement.poster,mediaType:this.xt(),viewType:this.state.viewType}}ce(){if(F(this.mediaElement))return;const t={abort:this.$t,canplay:this.st,canplaythrough:this.ve,durationchange:this.Se,emptied:this.rr,ended:this.Ce,error:this.it,loadeddata:this.fe,loadedmetadata:this.et,loadstart:this.pe,pause:this.ye,play:this.me,playing:this.ge,progress:this._e,ratechange:this.nr,seeked:this.we,seeking:this.ue,stalled:this.or,suspend:this.ar,volumechange:this.be,waiting:this.Ee};et(t).forEach(e=>{const i=t[e].bind(this),r=C(this.mediaElement,e,async n=>{await i(n)});this.Ot.add(r)})}$t(t){this.xe||(this.dispatchEvent(a("vds-abort",{triggerEvent:t})),this.bt("",t))}st(t){this.rs({event:t,duration:this.mediaElement.duration})}ve(t){this.state.started||this.dispatchEvent(a("vds-can-play-through",{triggerEvent:t,detail:{duration:this.mediaElement.duration}}))}pe(t){if(this.bt(this.mediaElement.currentSrc,t),this.mediaElement.currentSrc===""){this.$t();return}this.dispatchEvent(a("vds-load-start",{triggerEvent:t,detail:this.As()}))}rr(t){this.$e||this.dispatchEvent(a("vds-emptied",{triggerEvent:t}))}fe(t){this.dispatchEvent(a("vds-loaded-data",{triggerEvent:t}))}et(t){this.dispatchEvent(a("vds-volume-change",{detail:{volume:this.mediaElement.volume,muted:this.mediaElement.muted}})),this.dispatchEvent(a("vds-loaded-metadata",{triggerEvent:t,detail:this.As()}))}bn(t){this.dispatchEvent(a("vds-media-type-change",{detail:this.xt(),triggerEvent:t}))}me(t){const e=a("vds-play",{triggerEvent:t});e.autoplay=this.yt,this.dispatchEvent(e)}ye(t){this.mediaElement.readyState===1&&!this.W||(this.W=!1,this.Tt(),this.dispatchEvent(a("vds-pause",{triggerEvent:t})))}ge(t){this.W=!1;const e=a("vds-playing",{triggerEvent:t});this.dispatchEvent(e),this.Zi()}Se(t){this.mediaElement.ended&&this.K(this.mediaElement.duration,t),this.dispatchEvent(a("vds-duration-change",{detail:this.mediaElement.duration,triggerEvent:t}))}_e(t){this.dispatchEvent(a("vds-progress",{triggerEvent:t,detail:{buffered:this.mediaElement.buffered,seekable:this.mediaElement.seekable}}))}nr(t){throw Error("Not implemented")}ue(t){this.dispatchEvent(a("vds-seeking",{detail:this.mediaElement.currentTime,triggerEvent:t}))}we(t){const e=a("vds-seeked",{detail:this.mediaElement.currentTime,triggerEvent:t});this.dispatchEvent(e);const i=this.mediaElement.currentTime;if(Math.trunc(i)===Math.trunc(this.mediaElement.duration)&&de(this.mediaElement.duration)>de(i)&&(this.K(this.mediaElement.duration,t),!this.mediaElement.ended))try{this.play()}catch{}}or(t){this.dispatchEvent(a("vds-stalled",{triggerEvent:t})),this.mediaElement.readyState<3&&(this.W=!0,this.dispatchEvent(a("vds-waiting",{triggerEvent:t})))}be(t){this.dispatchEvent(a("vds-volume-change",{detail:{volume:this.mediaElement.volume,muted:this.mediaElement.muted},triggerEvent:t}))}Ee(t){this.mediaElement.readyState<3&&(this.W=!0,this.dispatchEvent(a("vds-waiting",{triggerEvent:t})))}ar(t){const e=a("vds-suspend",{triggerEvent:t});this.dispatchEvent(e)}Ce(t){this.Tt(),this.K(this.mediaElement.duration,t);const e=a("vds-end",{triggerEvent:t});this.dispatchEvent(e),this.state.loop?this.hr():this.dispatchEvent(a("vds-ended",{triggerEvent:t}))}hr(){f(this.mediaElement.controls)&&(this.mediaElement.controls=!1),this.dispatchEvent(a("vds-loop-request"))}it(t){const e=this.mediaElement.error;!e||this.dispatchEvent(a("vds-error",{detail:{message:e.message,code:e.code,mediaError:e},triggerEvent:t}))}Ei(){return this.mediaElement?.paused??!0}bi(){return this.mediaElement?.volume??1}wi(t){this.mediaElement.volume=t}Ci(){return this.mediaElement?.currentTime??0}ss(t){this.mediaElement.currentTime!==t&&(this.mediaElement.currentTime=t)}Si(){return this.mediaElement?.muted??!1}_i(t){this.mediaElement.muted=t}async play(){try{return this.is(),await this.Pi(),this.mediaElement?.play()}catch(t){const e=a("vds-play-fail");throw e.autoplay=this.yt,e.error=t,t}}async pause(){return this.is(),this.mediaElement?.pause()}xt(){return Gi(this.state.currentSrc)}}Wi([h({reflect:!0})],ke.prototype,"preload",2);class Ji extends ke{static get styles(){return[P`:host{display:inline-block}:host([hidden]){display:none}`]}connectedCallback(){super.connectedCallback(),this.dispatchEvent(a("vds-view-type-change",{detail:st.Audio}))}}b("vds-audio",Ji);class Yi extends Se{constructor(t,e,i){super(t,e);this.kt=i}get isFullscreen(){return this.isSupportedNatively?this.isNativeFullscreen:this.kt.isFullscreenMode}get isSupported(){return this.isSupportedNatively||this.isSupportedOnSafari}get isSupportedOnSafari(){return this.kt.isSupported}async Gt(){return this.isSupportedNatively?super.Gt():this.lr()}async lr(){return this.kt.setPresentationMode("fullscreen")}async Jt(){return this.isSupportedNatively?super.Jt():this.ur()}async ur(){return this.kt.setPresentationMode("inline")}Wt(t){return this.isSupportedNatively?super.Wt(t):this.isSupportedOnSafari?C(this.e,"vds-video-presentation-change",this.ke.bind(this)):A}ke(t){this.Xt(t)}Kt(t){return this.isSupportedNatively?super.Kt(t):A}}class Zi{constructor(t){this.e=t,this.P=void 0,this.w=new y;const e=t.firstUpdated;t.firstUpdated=i=>{e?.call(t,i),this.w.add(this.dr())},t.addController({hostDisconnected:this.G.bind(this)})}G(){this.setPresentationMode("inline"),this.w.empty()}get presentationMode(){return this.e.videoElement?.webkitPresentationMode}get isInlineMode(){return this.presentationMode==="inline"}get isPictureInPictureMode(){return this.presentationMode==="inline"}get isFullscreenMode(){return this.presentationMode==="fullscreen"}get isSupported(){return I(this.e.videoElement?.webkitSetPresentationMode)}setPresentationMode(t){this.e.videoElement?.webkitSetPresentationMode?.(t)}dr(){return!this.isSupported||F(this.e.videoElement)?A:C(this.e.videoElement,"webkitpresentationmodechanged",this.ke.bind(this))}ke(t){he(this.e,t),this.e.dispatchEvent(a("vds-video-presentation-change",{detail:this.presentationMode,triggerEvent:t}))}}class xs extends ke{constructor(){super(...arguments);this.presentationController=new Zi(this),this.fullscreenController=new Yi(this,this.screenOrientationController,this.presentationController)}static get styles(){return[P`:host{display:inline-block;background-color:var(--vds-video-bg-color,#000)}:host([hidden]){display:none}::slotted(video:not([width])){width:var(--vds-video-width,100%)}::slotted(video:not([height])){height:var(--vds-video-height,auto)}`]}connectedCallback(){super.connectedCallback(),this.dispatchEvent(a("vds-view-type-change",{detail:st.Video}))}get videoElement(){return this.mediaElement}}const Y=new Map;function tr(s){return Y.has(s)}async function er(s,t={}){if(f(s))return;if(t.onLoadStart?.(),!I(s))return t.onLoaded?.(s),s;const e=String(s);if(Y.has(e)){const i=Y.get(e);return t.onLoaded?.(i),i}try{const i=(await s())?.default;if(i&&!!i.isSupported)t.onLoaded?.(i),Y.set(e,i);else throw Error("");return i}catch(i){t.onLoadError?.(i)}}async function sr(s,t={}){if(!!tt(s)){if(Y.has(s))return Y.get(s);t.onLoadStart?.();try{if(await ws.load(s),!I(window.Hls))throw Error("");const e=window.Hls;return t.onLoaded?.(e),Y.set(s,e),e}catch(e){t.onLoadError?.(e)}}}function is(s){return bi(s.replace("vds-",""))}const rs="vds-hls-",ir=["lib-load","instance","unsupported"];function ns(s){return s.startsWith(rs)&&!ir.some(t=>s.startsWith(`${rs}${t}`))}var rr=Object.defineProperty,nr=Object.getOwnPropertyDescriptor,$s=(s,t,e,i)=>{for(var r=i>1?void 0:i?nr(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&rr(t,e,r),r};const os=/\.(m3u8)($|\?)/i,or="https://cdn.jsdelivr.net/npm/hls.js@^1.0.0/dist/hls.light",ar=`${or}.min.js`;class Ae extends xs{constructor(){super();this.At=!1,this.hlsConfig={},this.hlsLibrary=ar,this.L="",this.nt=[],Object.defineProperty(this,"hls-config",{set:t=>{this.hlsConfig=t}}),Object.defineProperty(this,"hls-library",{set:t=>{this.hlsLibrary=t}})}get Hls(){return this.Ae}get hlsEngine(){return this.Ls}get isHlsEngineAttached(){return this.At}get currentHlsSrc(){return this.L}async update(t){super.update(t),t.has("hlsLibrary")&&ze()&&this.cr()}disconnectedCallback(){this.Le(),super.disconnectedCallback()}get isHlsSupported(){return this.Hls?.isSupported()??ze()}get isHlsStream(){return this.state.src.some(t=>os.test(t))}cr(){this.canLoad||!tt(this.hlsLibrary)||tr(this.hlsLibrary)||bs(this.hlsLibrary)}async pr(t=!1){if(F(this.videoElement)&&!t&&!f(this.hlsEngine)){this.P?.infoGroup("\u{1F3D7}\uFE0F Could not build HLS engine").labelledLog("Video Element",this.videoElement).labelledLog("HLS Engine",this.hlsEngine).labelledLog("Force Rebuild Flag",t).dispatch();return}f(this.hlsEngine)||this.Le();const e={onLoadStart:()=>{this.dispatchEvent(a("vds-hls-lib-load-start"))},onLoaded:i=>{this.dispatchEvent(a("vds-hls-lib-loaded",{detail:i}))},onLoadError:i=>{this.dispatchEvent(a("vds-hls-lib-load-error",{detail:i})),this.dispatchEvent(a("vds-error",{detail:{message:i.message,code:ve.SrcNotSupported}}))}};if(this.Ae=await sr(this.hlsLibrary,e),f(this.Ae)&&!tt(this.hlsLibrary)&&(this.Ae=await er(this.hlsLibrary,e)),!!this.Hls){if(!this.Hls?.isSupported?.()){const i="[vds]: `hls.js` is not supported in this environment";this.dispatchEvent(a("vds-hls-unsupported")),this.dispatchEvent(a("vds-error",{detail:{message:i,code:ve.SrcNotSupported}}));return}this.Ls=new this.Hls(this.hlsConfig),this.dispatchEvent(a("vds-hls-instance",{detail:this.hlsEngine})),this.fr()}}Le(){this.hlsEngine?.destroy(),this.L="",this.Ls=void 0,this.At=!1}vr(){this.isHlsEngineAttached||f(this.hlsEngine)||F(this.videoElement)||(this.hlsEngine.attachMedia(this.videoElement),this.At=!0)}mr(){!this.isHlsEngineAttached||(this.hlsEngine?.detachMedia(),this.At=!1,this.L="")}gr(t){F(this.hlsEngine)||!this.isHlsStream||t===this.L||(this.hlsEngine.loadSource(t),this.L=t)}xt(){return this.state.mediaType===U.LiveVideo?U.LiveVideo:this.isHlsStream?U.Video:super.xt()}z(t){this.L.length>0&&!t.includes(this.L)&&t.push(this.L),super.z(t)}$t(t){if(this.isHlsSupported){for(const e of this.state.src)if(os.test(e)){this.yr(e);return}}super.$t(t)}async yr(t){if(this.L!==t&&!(!this.hasUpdated||!this.canLoad)){if(!this.isHlsStream){this.mr();return}F(this.hlsLibrary)||(f(this.hlsEngine)&&await this.pr(),this.vr(),this.gr(t))}}et(t){super.et(t),this.rs({event:t,duration:this.mediaElement.duration})}fr(){f(this.hlsEngine)||f(this.Hls)||(this.hlsEngine.on(this.Hls.Events.LEVEL_LOADED,this.br.bind(this)),this.nt.forEach(({type:t,listener:e,options:i})=>{this.hlsEngine?.[i?.once?"once":"on"](t,e,i?.context)}),this.hlsEngine.on(this.Hls.Events.ERROR,this.wr.bind(this)))}wr(t,e){if(!f(this.Hls)&&e.fatal)switch(e.type){case"networkError":this.Er();break;case"mediaError":this.Cr();break;default:this.Sr();break}}Er(){this.hlsEngine?.startLoad()}Cr(){this.hlsEngine?.recoverMediaError()}Sr(){this.Le()}br(t,e){this.state.canPlay||this._r(t,e)}_r(t,e){const{live:i,totalduration:r}=e.details,n=new be(t,{detail:e}),o=i?U.LiveVideo:U.Video;this.state.mediaType!==o&&this.dispatchEvent(a("vds-media-type-change",{detail:o,triggerEvent:n})),this.state.duration!==r&&this.dispatchEvent(a("vds-duration-change",{detail:r,triggerEvent:n}))}addEventListener(t,e,i){if(ns(t)){const r=is(t);this.nt.some(o=>o.type===r&&o.listener===e)||(this.nt.push({type:r,listener:e,options:i}),this.hlsEngine?.[i?.once?"once":"on"](r,e,i?.context));return}return super.addEventListener(t,e,i)}removeEventListener(t,e,i){if(ns(t)){const r=is(t);this.nt=this.nt.filter(n=>n.type===r&&n.listener===e),this.hlsEngine?.off(r,e,i?.context,i?.once);return}return super.removeEventListener(t,e,i)}}$s([h({type:Object,attribute:"hls-config"})],Ae.prototype,"hlsConfig",2);$s([h({attribute:"hls-library"})],Ae.prototype,"hlsLibrary",2);b("vds-hls",Ae);b("vds-video",xs);const ks={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},As=s=>(...t)=>({Js:s,values:t});class Ls{constructor(t){}get b(){return this.u.b}Ht(t,e,i){this.Lt=t,this.u=e,this.Pr=i}Ys(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}const hr=As(class extends Ls{constructor(s){var t;if(super(s),s.type!==ks.ATTRIBUTE||s.name!=="style"||((t=s.strings)===null||t===void 0?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(s){return Object.keys(s).reduce((t,e)=>{const i=s[e];return i==null?t:t+`${e=e.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`},"")}update(s,[t]){const{style:e}=s.element;if(this.ct===void 0){this.ct=new Set;for(const i in t)this.ct.add(i);return this.render(t)}this.ct.forEach(i=>{t[i]==null&&(this.ct.delete(i),i.includes("-")?e.removeProperty(i):e[i]="")});for(const i in t){const r=t[i];r!=null&&(this.ct.add(i),i.includes("-")?e.setProperty(i,r):e[i]=r)}return Z}}),lr=P`:host{display:block}:host([hidden]){display:none}.container{position:relative;width:100%;height:0;padding-bottom:min(max(var(--vds-aspect-ratio-min-height),var(--vds-aspect-ratio-percent)),var(--vds-aspect-ratio-max-height))}slot{display:block;position:absolute;top:0;left:0;width:100%;height:100%}::slotted(*){--vds-video-width:100%;--vds-video-height:100%;width:100%;height:100%}`;var ur=Object.defineProperty,dr=Object.getOwnPropertyDescriptor,Le=(s,t,e,i)=>{for(var r=i>1?void 0:i?dr(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&ur(t,e,r),r};class It extends S{constructor(){super(...arguments);this.minHeight="150px",this.maxHeight="100vh",this.ratio="2/1"}static get styles(){return[lr]}get isValidRatio(){return tt(this.ratio)?/\d{1,2}\s*?(?:\/|:)\s*?\d{1,2}/.test(this.ratio):!1}render(){return L`<div class="container" style="${hr({"--vds-aspect-ratio-percent":this.Or(),"--vds-aspect-ratio-min-height":this.minHeight??"150px","--vds-aspect-ratio-max-height":this.maxHeight??"100vh"})}"><slot></slot></div>`}Or(){if(this.isValidRatio){const[t,e]=this.Tr();return`${e/t*100}%`}return"50%"}Tr(){return this.ratio.split(/\s*?(?:\/|:)\s*?/).map(Number)}}Le([h({attribute:"min-height",reflect:!0})],It.prototype,"minHeight",2);Le([h({attribute:"max-height",reflect:!0})],It.prototype,"maxHeight",2);Le([h({reflect:!0})],It.prototype,"ratio",2);b("vds-aspect-ratio",It);var cr=Object.defineProperty,pr=Object.getOwnPropertyDescriptor,jt=(s,t,e,i)=>{for(var r=i>1?void 0:i?pr(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&cr(t,e,r),r};const me=new Map;class St extends S{constructor(){super();this.r=new y,this.repeat=0,this.priority=10,this.Ds=0,this.Dt=!1,this.De=Rt.consume(this),gs(this,Os,t=>{this.R=t})}static get styles(){return[P`:host{display:block;contain:content;z-index:0;opacity:0;visibility:hidden;pointer-events:none!important}:host([hidden]){display:none}`]}get Nt(){return this.R?me.get(this.R):void 0}get Ns(){return this.Nt?.get(this)}connectedCallback(){super.connectedCallback(),window.requestAnimationFrame(()=>{this.R&&me.set(this.R,new Map)})}willUpdate(t){this.xr(),this.$r(),this.kr(),super.willUpdate(t)}disconnectedCallback(){this.r.empty(),this.Ns?.[1].resolve(),this.Nt?.delete(this),super.disconnectedCallback()}performAction(t){if(!this.action)return;let e,i=this.action;this.action.startsWith("toggle:")&&(i=this.Ar()),this.action.startsWith("seek:")&&(i="seek",e=this.Ds+Number(this.action.split(":")[1])),this.dispatchEvent(a(`vds-${i}-request`,{bubbles:!0,composed:!0,detail:e,triggerEvent:t}))}xr(){if(this.r.empty(),!this.R||!this.type||!this.action)return;let t=0,e;const i=(n=!1)=>{t+=1,window.clearTimeout(e),e=window.setTimeout(()=>{const o=this.Ns?.[1];n&&this.Nt?.delete(this),fr(this.R),t=0,o?.resolve()},250)},r=C(this.R,this.type,n=>{!this.Lr(n)||(n.preventDefault(),t==0&&this.Nt?.set(this,[n,At()]),i(t<this.repeat))});this.r.add(r)}Lr(t){if(Ws(t)||Ks(t)||Be(t)){const e=Be(t)?t.touches[0]:void 0,i=e?.clientX??t.clientX,r=e?.clientY??t.clientY,n=this.getBoundingClientRect(),o=r>=n.top&&r<=n.bottom&&i>=n.left&&i<=n.right;return t.type.includes("leave")?!o:o}return!0}kr(){if(!this.action?.startsWith("seek"))return;const t=this.E.currentTime.subscribe(e=>{this.Ds=e});this.r.add(t)}get E(){return this.De.value}Ar(){switch(this.action?.split(":")[1]){case"paused":return this.Dt?"play":"pause";case"muted":return this.Dt?"unmute":"mute";case"fullscreen":return`${this.Dt?"exit":"enter"}-fullscreen`;default:return""}}$r(){if(!this.action?.startsWith("toggle:"))return;const t=this.action.split(":")[1],e=this.E[t]?.subscribe(i=>{this.Dt=i});e&&this.r.add(e)}}jt([h()],St.prototype,"type",2);jt([h({type:Number})],St.prototype,"repeat",2);jt([h({type:Number})],St.prototype,"priority",2);jt([h()],St.prototype,"action",2);const ne=new WeakSet;async function fr(s){if(ne.has(s))return;const t=me.get(s);if(!t)return;ne.add(s);const e=Array.from(t.values()).map(n=>n[1].promise);await Promise.all(e);const i=Array.from(t.keys()),r=Math.min(...i.map(n=>n.priority));i.filter(n=>n.priority<=r).map(n=>{const o=t.get(n)[0];n.performAction(o)}),t.clear(),ne.delete(s)}b("vds-gesture",St);var vr=Object.defineProperty,mr=Object.getOwnPropertyDescriptor,De=(s,t,e,i)=>{for(var r=i>1?void 0:i?mr(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&vr(t,e,r),r};const as=new Set;class Bt extends S{constructor(){super();this.__canLoad=!1,this.Fs=new Ct(this),x(this,"poster",t=>{window.requestAnimationFrame(()=>{!this.__canLoad&&!as.has(t)&&(bs(t,"prefetch"),as.add(t))}),this.__src=t}),x(this,"canLoad",t=>{this.Ms(t),this.__canLoad=t})}static get styles(){return[P`:host{display:block;contain:content;pointer-events:none;object-fit:cover;box-sizing:border-box}:host([hidden]){display:none}img{display:block;width:100%;height:100%;pointer-events:none;object-fit:inherit;object-position:inherit;user-select:none;-webkit-user-select:none;box-sizing:border-box}`]}get src(){return this.__src}connectedCallback(){super.connectedCallback(),this.Fs.hidePoster()}disconnectedCallback(){this.Fs.showPoster(),super.disconnectedCallback(),this.Ms(!1)}render(){return L`<img part="img" src="${ae(this.__canLoad?this.src:null)}" alt="${ae(this.alt)}" @load="${this.Dr}" @error="${this.Nr}">`}Fr(){this.removeAttribute("img-error"),this.removeAttribute("img-loaded"),this.src&&this.src.length>0&&this.setAttribute("img-loading","")}Dr(){this.removeAttribute("img-loading"),this.setAttribute("img-loaded","")}Nr(){this.removeAttribute("img-loading"),this.setAttribute("img-error","")}Ms(t){t?this.Fr():(this.removeAttribute("img-error"),this.removeAttribute("img-loaded"),this.removeAttribute("img-loading"))}}De([N()],Bt.prototype,"__src",2);De([N()],Bt.prototype,"__canLoad",2);De([h()],Bt.prototype,"alt",2);b("vds-poster",Bt);const gr=P`:host{display:table;contain:content;user-select:none;cursor:pointer;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}:host([hidden]){display:none}:host(:focus){outline:0}:host(:focus-visible){outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}:host(.focus-visible){outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}`;var yr=Object.defineProperty,br=Object.getOwnPropertyDescriptor,Ds=(s,t,e,i)=>{for(var r=i>1?void 0:i?br(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&yr(t,e,r),r};class ct extends S{constructor(){super();this.pressed=!1,this.disabled=!1,this.wn=c(this,"click",t=>{this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())},{capture:!0}),ps(this),["pointerdown","keydown"].forEach(t=>{c(this,t,e=>{this.disabled||Pe(e)&&!mi(e)||this.Ft(e)})})}static get styles(){return[gr]}static get parts(){return[]}connectedCallback(){super.connectedCallback(),M(this,"tabindex","0"),M(this,"role","button"),this.qs()}updated(t){t.has("pressed")&&this.qs()}qs(){D(this,"aria-pressed",this.pressed?"true":"false")}render(){return this.Ne()}Ne(){return L`<slot></slot>`}Ft(t){this.pressed=!this.pressed}}Ds([h({type:Boolean})],ct.prototype,"pressed",2);Ds([h({type:Boolean,reflect:!0})],ct.prototype,"disabled",2);b("vds-toggle-button",ct);class wr extends ct{constructor(){super();this.a=new Ct(this),x(this,"muted",t=>{this.pressed=t,D(this,"muted",t)})}connectedCallback(){super.connectedCallback(),M(this,"aria-label","Mute")}Ft(t){this.disabled||(this.pressed?this.a.unmute(t):this.a.mute(t))}}b("vds-mute-button",wr);class Er extends ct{constructor(){super();this.a=new Ct(this),x(this,"paused",t=>{this.pressed=!t,D(this,"paused",t)})}connectedCallback(){super.connectedCallback(),M(this,"aria-label","Play")}Ft(t){this.disabled||(this.pressed?this.a.pause(t):this.a.play(t))}}b("vds-play-button",Er);var Cr=Object.defineProperty,Sr=Object.getOwnPropertyDescriptor,_r=(s,t,e,i)=>{for(var r=i>1?void 0:i?Sr(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&Cr(t,e,r),r};class Ns extends ct{constructor(){super();this.a=new Ct(this),x(this,"fullscreen",t=>{this.pressed=t,D(this,"fullscreen",t)}),x(this,"canFullscreen",t=>{D(this,"hidden",!t)})}connectedCallback(){super.connectedCallback(),M(this,"aria-label","Fullscreen")}Ft(t){this.disabled||(this.pressed?this.a.exitFullscreen(this.fullscreenTarget,t):this.a.enterFullscreen(this.fullscreenTarget,t))}}_r([h({attribute:"fullscreen-target"})],Ns.prototype,"fullscreenTarget",2);b("vds-fullscreen-button",Ns);function Pr(){const s=H(!1),t=H(!1);return{value:H(50),pointerValue:H(0),min:H(0),max:H(100),dragging:s,pointing:t,interactive:_e([s,t],([e,i])=>e||i)}}const Ne=we(Pr),Or=P`*{box-sizing:border-box;touch-action:none}:host{display:block;contain:layout;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}:host([hidden]){display:none}:host(:focus){outline:0}:host(:focus-visible){outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}:host(.focus-visible){outline:1px auto Highlight;outline:1px auto -webkit-focus-ring-color}`;var Tr=Object.defineProperty,xr=Object.getOwnPropertyDescriptor,W=(s,t,e,i)=>{for(var r=i>1?void 0:i?xr(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&Tr(t,e,r),r},ge=(s=>(s[s.Left=-1]="Left",s[s.ArrowLeft=-1]="ArrowLeft",s[s.Up=-1]="Up",s[s.ArrowUp=-1]="ArrowUp",s[s.Right=1]="Right",s[s.ArrowRight=1]="ArrowRight",s[s.Down=1]="Down",s[s.ArrowDown=1]="ArrowDown",s))(ge||{});class q extends S{constructor(){super();this.Mr=Ne.provide(this),this.disabled=!1,this.value=50,this.Fe=1,this.Rs=1,this.shiftKeyMultiplier=5,this.customValueText=!1,this.a=new Ct(this),this.D=new y,this.En=c(this,"pointerenter",()=>{this.disabled||(this.setAttribute("pointing",""),this.store.pointing.set(!0))}),this.Cn=c(this,"pointermove",t=>{if(this.disabled||this.isDragging)return;const e=this.Mt(t);this.store.pointerValue.set(e),this.qt(t)}),this.Sn=c(this,"pointerleave",()=>{this.disabled||(this.removeAttribute("pointing"),this.store.pointing.set(!1))}),this._n=c(this,"pointerdown",t=>{this.disabled||(this.qr(t),this.Me(t))}),this.Pn=c(this,"keydown",t=>{if(this.disabled)return;const{key:e,shiftKey:i}=t;if(!Object.keys(ge).includes(e))return;const n=i?this.keyboardStep*this.shiftKeyMultiplier:this.keyboardStep,o=Number(ge[e]),d=n*o,l=(this.value+d)/this.step,u=this.step*l;this.value=this.Us(u),this.Rt(t)}),this.On=c(this,"vds-slider-value-change",this.qe.bind(this)),this.Tn=c(this,"vds-slider-pointer-value-change",this.Vs.bind(this)),this.Me=Xt(t=>{if(this.disabled||!this.isDragging)return;const e=this.Mt(t);this.store.pointerValue.set(e),this.qt(t)}),this.xn=c(this,"pointerup",t=>{this.disabled||!this.isDragging||this.Rr(t)},{target:document}),this.$n=c(this,"touchmove",t=>{this.disabled||!this.isDragging||t.preventDefault()},{target:document,passive:!1}),this.kn=c(this,"pointermove",t=>{this.disabled||!this.isDragging||this.Me(t)},{target:document}),this.Hs=this.value,this.Rt=Xt(t=>{this.value!==this.Hs&&(this.dispatchEvent(a("vds-slider-value-change",{detail:this.value,triggerEvent:t})),this.Hs=this.value)}),this.Is=this.pointerValue,this.qt=Xt(t=>{if(this.pointerValue===this.Is)return;["vds-slider-pointer-value-change",this.isDragging&&"vds-slider-drag-value-change"].forEach(i=>{i&&this.dispatchEvent(a(i,{detail:this.pointerValue,triggerEvent:t}))}),this.Is=this.pointerValue}),ps(this)}static get styles(){return[Or]}static get parts(){return[]}get store(){return this.Mr.value}get min(){return J(this.store.min)}set min(t){this.store.min.set(t)}get max(){return J(this.store.max)}set max(t){this.store.max.set(t)}get step(){return this.Fe}set step(t){this.Fe=t}get keyboardStep(){return this.Rs}set keyboardStep(t){this.Rs=t}get isDragging(){return J(this.store.dragging)}get fillRate(){const t=this.max-this.min,e=this.value-this.min;return t>0?e/t:0}get fillPercent(){return this.fillRate*100}get pointerValue(){return J(this.store.pointerValue)}get pointerRate(){const t=this.max-this.min,e=this.pointerValue-this.min;return t>0?e/t:0}get pointerPercent(){return this.pointerRate*100}connectedCallback(){super.connectedCallback(),this.Ur(),this.qe(),this.Vs(),this.D.add(this.store.interactive.subscribe(t=>{D(this,"interactive",t)}))}willUpdate(t){(t.has("value")||t.has("min")||t.has("max"))&&(this.value=this.Us(this.value),this.store.value.set(this.value),this.qe(),this.Rt()),t.has("disabled")&&this.disabled&&(this.store.dragging.set(!1),this.store.pointing.set(!1),this.removeAttribute("dragging"),this.removeAttribute("pointing"),this.removeAttribute("interactive"),D(this,"aria-disabled",this.disabled)),this.customValueText||this.Vr(),super.willUpdate(t)}disconnectedCallback(){this.Me.cancel(),this.D.empty(),super.disconnectedCallback()}qe(){ot(this,"fill-value",`${this.value}`),ot(this,"fill-rate",`${this.fillRate}`),ot(this,"fill-percent",`${this.fillPercent}%`)}Vs(){ot(this,"pointer-value",`${this.pointerValue}`),ot(this,"pointer-rate",`${this.pointerRate}`),ot(this,"pointer-percent",`${this.pointerPercent}%`)}render(){return this.Hr()}Hr(){return L`${this.Ne()}`}Ne(){return L`<slot></slot>`}Ur(){M(this,"role","slider"),M(this,"tabindex","0"),M(this,"aria-orientation","horizontal"),M(this,"autocomplete","off")}Vr(){this.setAttribute("aria-valuemin",this.js()),this.setAttribute("aria-valuenow",this.Bs()),this.setAttribute("aria-valuemax",this.zs()),this.setAttribute("aria-valuetext",this.Ut())}js(){return String(this.min)}Bs(){return String(this.value)}zs(){return String(this.max)}Ut(){return`${kt(this.value/this.max*100,2)}%`}qr(t){if(this.isDragging)return;this.store.dragging.set(!0),this.setAttribute("dragging","");const e=this.Mt(t);this.store.pointerValue.set(e),this.qt(t),this.dispatchEvent(a("vds-slider-drag-start",{triggerEvent:t,detail:this.value})),this.a.pauseUserIdle(t)}Rr(t){if(!this.isDragging)return;this.store.dragging.set(!1),this.Rt.cancel(),this.removeAttribute("dragging");const e=this.Mt(t);this.value=e,this.store.pointerValue.set(e),this.Rt(t),this.qt(t),this.dispatchEvent(a("vds-slider-drag-end",{triggerEvent:t,detail:this.value})),this.a.resumeUserIdle(t)}Us(t){return ue(this.min,kt(t,de(this.step)),this.max)}Ir(t){const e=ue(0,t,1),r=(this.max-this.min)*e,n=Math.round(r/this.step),o=this.step*n;return this.min+o}Mt(t){const e=t.clientX,{left:i,width:r}=this.getBoundingClientRect(),n=(e-i)/r;return this.Ir(n)}}W([h({reflect:!0,type:Number})],q.prototype,"min",1);W([h({reflect:!0,type:Number})],q.prototype,"max",1);W([h({reflect:!0,type:Boolean})],q.prototype,"disabled",2);W([h({reflect:!0,type:Number})],q.prototype,"value",2);W([h({type:Number,reflect:!0})],q.prototype,"step",1);W([h({attribute:"keyboard-step",type:Number})],q.prototype,"keyboardStep",1);W([h({attribute:"shift-key-multiplier",type:Number})],q.prototype,"shiftKeyMultiplier",2);W([h({type:Boolean,attribute:"custom-value-text"})],q.prototype,"customValueText",2);b("vds-slider",q);var $r=Object.defineProperty,kr=Object.getOwnPropertyDescriptor,pt=(s,t,e,i)=>{for(var r=i>1?void 0:i?kr(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&$r(t,e,r),r};class it extends S{constructor(){super(...arguments);this.r=new y,this.jr=Ne.consume(this),this.__value=0,this.type="current",this.showHours=!1,this.padHours=!1,this.decimalPlaces=2}static get styles(){return[P`:host{display:inline-block;contain:content}:host([hidden]){display:none}`]}get Re(){return this.jr.value}connectedCallback(){super.connectedCallback(),this.at()}update(t){(t.has("type")||t.has("format"))&&this.at(),super.update(t)}disconnectedCallback(){this.r.empty(),super.disconnectedCallback()}render(){return L`${this.Ut()}`}at(){this.r.empty();const t=this.Re[this.type==="current"?"value":"pointerValue"],i=(this.format==="percent"?this.Br(t):t).subscribe(r=>{this.__value=r});this.r.add(i)}Br(t){return _e([t,this.Re.min,this.Re.max],([e,i,r])=>{const n=r-i;return e/n*100})}Ut(){switch(this.format){case"percent":return this.zr();case"time":return this.Qr();default:return`${this.__value}`}}zr(){return`${kt(this.__value,this.decimalPlaces)}%`}Qr(){return Cs(this.__value,this.padHours,this.showHours)}}pt([N()],it.prototype,"__value",2);pt([h()],it.prototype,"type",2);pt([h()],it.prototype,"format",2);pt([h({attribute:"show-hours",type:Boolean})],it.prototype,"showHours",2);pt([h({attribute:"pad-hours",type:Boolean})],it.prototype,"padHours",2);pt([h({attribute:"decimal-places",type:Number})],it.prototype,"decimalPlaces",2);const Ar=s=>s.strings===void 0;const mt=(s,t)=>{var e,i;const r=s.y;if(r===void 0)return!1;for(const n of r)(i=(e=n).He)===null||i===void 0||i.call(e,t,!1),mt(n,t);return!0},Nt=s=>{let t,e;do{if((t=s.u)===void 0)break;e=t.y,e.delete(s),s=t}while(e?.size===0)},Fs=s=>{for(let t;t=s.u;s=t){let e=t.y;if(e===void 0)t.y=e=new Set;else if(e.has(s))break;e.add(s),Nr(t)}};function Lr(s){this.y!==void 0?(Nt(this),this.u=s,Fs(this)):this.u=s}function Dr(s,t=!1,e=0){const i=this.i,r=this.y;if(r!==void 0&&r.size!==0)if(t)if(Array.isArray(i))for(let n=e;n<i.length;n++)mt(i[n],!1),Nt(i[n]);else i!=null&&(mt(i,!1),Nt(i));else mt(this,s)}const Nr=s=>{var t,e,i,r;s.type==ks.CHILD&&((t=(i=s).It)!==null&&t!==void 0||(i.It=Dr),(e=(r=s).Wr)!==null&&e!==void 0||(r.Wr=Lr))};class Fr extends Ls{constructor(){super(...arguments),this.y=void 0}Ht(t,e,i){super.Ht(t,e,i),Fs(this),this.isConnected=t.b}He(t,e=!0){var i,r;t!==this.isConnected&&(this.isConnected=t,t?(i=this.reconnected)===null||i===void 0||i.call(this):(r=this.disconnected)===null||r===void 0||r.call(this)),e&&(mt(this,t),Nt(this))}setValue(t){if(Ar(this.Lt))this.Lt._(t,this);else{const e=[...this.Lt.i];e[this.Pr]=t,this.Lt._(e,this,0)}}disconnected(){}reconnected(){}}const Mr=()=>new qr;class qr{}const oe=new WeakMap,Rr=As(class extends Fr{render(s){return g}update(s,[t]){var e;const i=t!==this.U;return i&&this.U!==void 0&&this.ot(void 0),(i||this.rt!==this.lt)&&(this.U=t,this.ht=(e=s.options)===null||e===void 0?void 0:e.host,this.ot(this.lt=s.element)),g}ot(s){typeof this.U=="function"?(oe.get(this.U)!==void 0&&this.U.call(this.ht,void 0),oe.set(this.U,s),s!==void 0&&this.U.call(this.ht,s)):this.U.value=s}get rt(){var s;return typeof this.U=="function"?oe.get(this.U):(s=this.U)===null||s===void 0?void 0:s.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}});var Ur=Object.defineProperty,Vr=Object.getOwnPropertyDescriptor,Fe=(s,t,e,i)=>{for(var r=i>1?void 0:i?Vr(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&Ur(t,e,r),r};class zt extends S{constructor(){super();this.Qs=Mr(),this.__canPlay=!1,this.__hasError=!1,ys(this,Ne,"pointerValue",t=>{this.K(t)})}static get styles(){return[P`:host{display:inline-block;contain:content}:host([hidden]){display:none}video{display:block;width:100%;height:auto}`]}get videoElement(){return this.Qs.value}K(t){!this.__hasError&&this.__canPlay&&this.videoElement.currentTime!==t&&(this.videoElement.currentTime=t)}willUpdate(t){t.has("src")&&(this.__canPlay=!1,this.__hasError=!1,this.removeAttribute("video-can-play"),this.removeAttribute("video-error")),super.willUpdate(t)}render(){return this.Kr()}Kr(){return L`<video part="video" muted playsinline preload="auto" src="${Ys(this.src)}" @canplay="${this.st}" @error="${this.it}" ${Rr(this.Qs)}></video>`}async st(t){this.__canPlay=!0,this.setAttribute("video-can-play",""),he(this,t)}it(t){this.__hasError=!0,this.setAttribute("video-error",""),he(this,t)}}Fe([h()],zt.prototype,"src",2);Fe([N()],zt.prototype,"__canPlay",2);Fe([N()],zt.prototype,"__hasError",2);const Hr=P``;var Ir=Object.defineProperty,jr=Object.getOwnPropertyDescriptor,K=(s,t,e,i)=>{for(var r=i>1?void 0:i?jr(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&Ir(t,e,r),r};class z extends q{constructor(){super();this.Fe=.1,this.value=0,this.valueText="{currentTime} out of {duration}",this.pauseWhileDragging=!1,this.seekingRequestThrottle=100,this.__mediaDuration=0,this.__mediaPaused=!0,this.An=c(this,"vds-slider-drag-start",t=>{this.Ws(t)}),this.Xr=c(this,"vds-slider-value-change",t=>{Pe(t.originEvent)&&(this.ut.cancel(),this.a.seek(this.value,t))}),this.Gr=c(this,"vds-slider-drag-value-change",t=>{this.ut(t)}),this.Ln=c(this,"vds-slider-drag-end",t=>{this.ut.cancel(),this.a.seek(this.value,t),this.Ws(t)}),this.ut=Ss(t=>{this.a.seeking(this.value,t)},this.seekingRequestThrottle),this.Ue=!1,x(this,"currentTime",t=>{this.value=t}),x(this,"duration",t=>{this.__mediaDuration=t,this.requestUpdate("max")}),x(this,"paused",t=>{this.__mediaPaused=t})}static get styles(){return[super.styles,Hr]}connectedCallback(){super.connectedCallback(),M(this,"aria-label","Media time")}get min(){return 0}set min(t){}get max(){return this.__mediaDuration}set max(t){}update(t){t.has("disabled")&&this.disabled&&this.ut.cancel(),super.update(t)}disconnectedCallback(){this.ut.cancel(),super.disconnectedCallback()}js(){return"0%"}Bs(){return`${Math.round(this.fillPercent)}%`}Ut(){return this.valueText.replace("{currentTime}",Ge(this.value)).replace("{duration}",Ge(this.__mediaDuration))}zs(){return"100%"}Ws(t){!this.pauseWhileDragging||(this.isDragging&&!this.__mediaPaused?(this.Ue=!0,this.a.pause(t)):this.Ue&&!this.isDragging&&this.__mediaPaused&&(this.Ue=!1,this.a.play(t)))}}K([h({attribute:!1,state:!0})],z.prototype,"value",2);K([h({attribute:!1})],z.prototype,"min",1);K([h({attribute:!1})],z.prototype,"max",1);K([h({attribute:"value-text"})],z.prototype,"valueText",2);K([h({attribute:"pause-while-dragging",type:Boolean})],z.prototype,"pauseWhileDragging",2);K([h({attribute:"seeking-request-throttle",type:Number})],z.prototype,"seekingRequestThrottle",2);K([N()],z.prototype,"__mediaDuration",2);K([N()],z.prototype,"__mediaPaused",2);b("vds-time-slider",z);var Br=Object.defineProperty,zr=Object.getOwnPropertyDescriptor,Me=(s,t,e,i)=>{for(var r=i>1?void 0:i?zr(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&Br(t,e,r),r};class Qt extends q{constructor(){super();this.value=100,this.Xr=c(this,"vds-slider-value-change",this.Ks.bind(this)),this.Gr=c(this,"vds-slider-drag-value-change",this.Ks.bind(this)),x(this,"volume",t=>{this.value=t*100})}connectedCallback(){super.connectedCallback(),M(this,"aria-label","Media volume")}get min(){return 0}set min(t){}get max(){return 100}set max(t){}Ks(t){const e=t.detail,i=kt(e/100,3);this.a.changeVolume(i,t)}}Me([h({attribute:!1})],Qt.prototype,"min",1);Me([h({attribute:!1})],Qt.prototype,"max",1);Me([h({attribute:!1,state:!0})],Qt.prototype,"value",2);b("vds-volume-slider",Qt);b("vds-slider-video",zt);b("vds-slider-value-text",it);var Qr=Object.defineProperty,Wr=Object.getOwnPropertyDescriptor,_t=(s,t,e,i)=>{for(var r=i>1?void 0:i?Wr(t,e):t,n=s.length-1,o;n>=0;n--)(o=s[n])&&(r=(i?o(t,e,r):o(r))||r);return i&&r&&Qr(t,e,r),r};class ft extends S{constructor(){super(...arguments);this.r=new y,this.De=Rt.consume(this),this.__seconds=0,this.type="current",this.showHours=!1,this.padHours=!1,this.remainder=!1}static get styles(){return[P`:host{display:inline-block;contain:content}:host([hidden]){display:none}`]}get E(){return this.De.value}connectedCallback(){super.connectedCallback(),this.at()}update(t){(t.has("type")||t.has("remainder"))&&this.at(),super.update(t)}disconnectedCallback(){this.r.empty(),super.disconnectedCallback()}render(){return L`${this.Jr()}`}at(){this.r.empty();const t=this.Yr(),e=(this.remainder?this.Zr(t):t).subscribe(i=>{this.__seconds=i});this.r.add(e)}Yr(){switch(this.type){case"buffered":return this.E.bufferedAmount;case"seekable":return this.E.seekableAmount;case"duration":return this.E.duration;default:return this.E.currentTime}}Zr(t){return _e([t,this.E.duration],([e,i])=>Math.max(0,i-e))}Jr(){return Cs(this.__seconds,this.padHours,this.showHours)}}_t([N()],ft.prototype,"__seconds",2);_t([h()],ft.prototype,"type",2);_t([h({attribute:"show-hours",type:Boolean})],ft.prototype,"showHours",2);_t([h({attribute:"pad-hours",type:Boolean})],ft.prototype,"padHours",2);_t([h({type:Boolean})],ft.prototype,"remainder",2);b("vds-time",ft);
